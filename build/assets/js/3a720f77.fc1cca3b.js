"use strict";(self.webpackChunkmlops_documentation=self.webpackChunkmlops_documentation||[]).push([[4528],{5111:function(n,e,r){r.r(e),r.d(e,{assets:function(){return a},contentTitle:function(){return t},default:function(){return u},frontMatter:function(){return o},metadata:function(){return i},toc:function(){return c}});var i=JSON.parse('{"id":"tools/mysql","title":"MySQL","description":"Overview","source":"@site/docs/tools/mysql.md","sourceDirName":"tools","slug":"/tools/mysql","permalink":"/docs/tools/mysql","draft":false,"unlisted":false,"editUrl":"https://github.com/MLops-Project-Platform/documentation/tree/main/docs/tools/mysql.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"PostgreSQL","permalink":"/docs/tools/postgres"},"next":{"title":"MongoDB","permalink":"/docs/tools/mongodb"}}'),l=r(4848),s=r(8453);const o={sidebar_position:2},t="MySQL",a={},c=[{value:"Overview",id:"overview",level:2},{value:"Key Features",id:"key-features",level:2},{value:"Use Cases in MLOps",id:"use-cases-in-mlops",level:2},{value:"Metadata Storage",id:"metadata-storage",level:3},{value:"Installation",id:"installation",level:2},{value:"Docker",id:"docker",level:3},{value:"Connection",id:"connection",level:3},{value:"Performance Optimization",id:"performance-optimization",level:2},{value:"Indexing",id:"indexing",level:3},{value:"Query Optimization",id:"query-optimization",level:3},{value:"Connection Pooling",id:"connection-pooling",level:3},{value:"Replication Setup",id:"replication-setup",level:2},{value:"Master-Slave Replication",id:"master-slave-replication",level:3},{value:"Backup and Recovery",id:"backup-and-recovery",level:2},{value:"mysqldump Backup",id:"mysqldump-backup",level:3},{value:"Binary Log Backup",id:"binary-log-backup",level:3},{value:"High Availability",id:"high-availability",level:2},{value:"MySQL Cluster",id:"mysql-cluster",level:3},{value:"InnoDB Replication",id:"innodb-replication",level:3},{value:"Monitoring",id:"monitoring",level:2},{value:"Health Checks",id:"health-checks",level:3},{value:"Key Metrics",id:"key-metrics",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Connection Issues",id:"connection-issues",level:3},{value:"Performance Issues",id:"performance-issues",level:3},{value:"Replication Lag",id:"replication-lag",level:3},{value:"Further Reading",id:"further-reading",level:2}];function d(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.header,{children:(0,l.jsx)(e.h1,{id:"mysql",children:"MySQL"})}),"\n",(0,l.jsx)(e.h2,{id:"overview",children:"Overview"}),"\n",(0,l.jsx)(e.p,{children:"MySQL is a popular open-source relational database system. It offers a good balance between performance, reliability, and ease of use, making it suitable as an alternative metadata backend for MLOps platforms."}),"\n",(0,l.jsx)(e.h2,{id:"key-features",children:"Key Features"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"ACID Compliance"})," - With InnoDB engine"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"Replication"})," - Master-slave and master-master replication"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"Partitioning"})," - Horizontal table partitioning"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"Full-text Search"})," - Built-in full-text indexing"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"JSON Support"})," - Native JSON data type"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"Performance"})," - Optimized for read-heavy workloads"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"use-cases-in-mlops",children:"Use Cases in MLOps"}),"\n",(0,l.jsx)(e.h3,{id:"metadata-storage",children:"Metadata Storage"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sql",children:"-- Store experiment metadata\r\nCREATE TABLE experiments (\r\n  experiment_id INT AUTO_INCREMENT PRIMARY KEY,\r\n  name VARCHAR(255) NOT NULL,\r\n  description TEXT,\r\n  created_timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\r\n  artifact_location VARCHAR(500),\r\n  lifecycle_stage VARCHAR(50)\r\n);\r\n\r\n-- Store training runs\r\nCREATE TABLE runs (\r\n  run_id VARCHAR(255) PRIMARY KEY,\r\n  experiment_id INT NOT NULL,\r\n  user_id VARCHAR(255),\r\n  status VARCHAR(50),\r\n  start_time BIGINT,\r\n  end_time BIGINT,\r\n  artifact_uri VARCHAR(500),\r\n  FOREIGN KEY (experiment_id) REFERENCES experiments(experiment_id)\r\n);\r\n\r\n-- Store metrics\r\nCREATE TABLE metrics (\r\n  run_id VARCHAR(255) NOT NULL,\r\n  metric_key VARCHAR(255) NOT NULL,\r\n  metric_value FLOAT,\r\n  timestamp BIGINT,\r\n  step INT DEFAULT 0,\r\n  PRIMARY KEY (run_id, metric_key, timestamp),\r\n  FOREIGN KEY (run_id) REFERENCES runs(run_id)\r\n);\n"})}),"\n",(0,l.jsx)(e.h2,{id:"installation",children:"Installation"}),"\n",(0,l.jsx)(e.h3,{id:"docker",children:"Docker"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:'mysql:\r\n  image: mysql:8.0\r\n  environment:\r\n    MYSQL_ROOT_PASSWORD: root_password\r\n    MYSQL_DATABASE: mlflow\r\n    MYSQL_USER: mlflow\r\n    MYSQL_PASSWORD: mlflow_password\r\n  ports:\r\n    - "3306:3306"\r\n  volumes:\r\n    - mysql_data:/var/lib/mysql\n'})}),"\n",(0,l.jsx)(e.h3,{id:"connection",children:"Connection"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-python",children:"import mysql.connector\r\n\r\nconnection = mysql.connector.connect(\r\n    host='localhost',\r\n    user='mlflow',\r\n    password='mlflow_password',\r\n    database='mlflow',\r\n    port=3306\r\n)\r\n\r\ncursor = connection.cursor()\r\ncursor.execute(\"SELECT * FROM experiments\")\r\nresults = cursor.fetchall()\r\ncursor.close()\r\nconnection.close()\n"})}),"\n",(0,l.jsx)(e.h2,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,l.jsx)(e.h3,{id:"indexing",children:"Indexing"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sql",children:"-- Create indexes for frequently queried columns\r\nCREATE INDEX idx_experiment_name ON experiments(name);\r\nCREATE INDEX idx_run_status ON runs(status);\r\nCREATE INDEX idx_metrics_timestamp ON metrics(timestamp);\r\n\r\n-- Composite index for common queries\r\nCREATE INDEX idx_run_experiment ON runs(experiment_id, status);\n"})}),"\n",(0,l.jsx)(e.h3,{id:"query-optimization",children:"Query Optimization"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sql",children:"-- Use EXPLAIN to analyze queries\r\nEXPLAIN SELECT * FROM metrics WHERE run_id = 'run_123' AND timestamp > 1000;\r\n\r\n-- Use appropriate data types\r\nALTER TABLE metrics MODIFY metric_value DECIMAL(10, 6);\r\n\r\n-- Archive old data\r\nINSERT INTO metrics_archive SELECT * FROM metrics WHERE timestamp < DATE_SUB(NOW(), INTERVAL 1 YEAR);\r\nDELETE FROM metrics WHERE timestamp < DATE_SUB(NOW(), INTERVAL 1 YEAR);\n"})}),"\n",(0,l.jsx)(e.h3,{id:"connection-pooling",children:"Connection Pooling"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-python",children:"from mysql.connector import pooling\r\n\r\nconnection_pool = pooling.MySQLConnectionPool(\r\n    pool_name=\"mlops_pool\",\r\n    pool_size=5,\r\n    host='localhost',\r\n    user='mlflow',\r\n    password='mlflow_password',\r\n    database='mlflow'\r\n)\r\n\r\nconnection = connection_pool.get_connection()\n"})}),"\n",(0,l.jsx)(e.h2,{id:"replication-setup",children:"Replication Setup"}),"\n",(0,l.jsx)(e.h3,{id:"master-slave-replication",children:"Master-Slave Replication"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sql",children:"-- On Master\r\nCREATE USER 'replication'@'%' IDENTIFIED BY 'password';\r\nGRANT REPLICATION SLAVE ON *.* TO 'replication'@'%';\r\n\r\nSHOW MASTER STATUS;\r\n-- Note: File and Position values\r\n\r\n-- On Slave\r\nCHANGE MASTER TO\r\n  MASTER_HOST='master_ip',\r\n  MASTER_USER='replication',\r\n  MASTER_PASSWORD='password',\r\n  MASTER_LOG_FILE='mysql-bin.000001',\r\n  MASTER_LOG_POS=154;\r\n\r\nSTART SLAVE;\r\nSHOW SLAVE STATUS\\G\n"})}),"\n",(0,l.jsx)(e.h2,{id:"backup-and-recovery",children:"Backup and Recovery"}),"\n",(0,l.jsx)(e.h3,{id:"mysqldump-backup",children:"mysqldump Backup"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# Full backup\r\nmysqldump -h localhost -u mlflow -p --all-databases > backup_full.sql\r\n\r\n# Specific database\r\nmysqldump -h localhost -u mlflow -p mlflow > backup_mlflow.sql\r\n\r\n# With compression\r\nmysqldump -h localhost -u mlflow -p mlflow | gzip > backup_mlflow.sql.gz\r\n\r\n# Restore from backup\r\nmysql -h localhost -u mlflow -p mlflow < backup_mlflow.sql\r\n\r\n# Restore from compressed backup\r\ngunzip < backup_mlflow.sql.gz | mysql -h localhost -u mlflow -p mlflow\n"})}),"\n",(0,l.jsx)(e.h3,{id:"binary-log-backup",children:"Binary Log Backup"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# Enable binary logging\r\n# Add to my.cnf:\r\n# log_bin=mysql-bin\r\n# server-id=1\r\n\r\n# Flush logs to create new binary log file\r\nmysqladmin -u root flush-logs\r\n\r\n# Show binary logs\r\nSHOW BINARY LOGS;\r\n\r\n# Restore point-in-time recovery\r\nmysqlbinlog mysql-bin.000001 | mysql -u root\n"})}),"\n",(0,l.jsx)(e.h2,{id:"high-availability",children:"High Availability"}),"\n",(0,l.jsx)(e.h3,{id:"mysql-cluster",children:"MySQL Cluster"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sql",children:"-- Install NDB cluster engine\r\n-- Configure cluster config.ini\r\n\r\n-- Create cluster database\r\nCREATE DATABASE ndbcluster ENGINE=NDBCLUSTER;\n"})}),"\n",(0,l.jsx)(e.h3,{id:"innodb-replication",children:"InnoDB Replication"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sql",children:"-- Enable binary logging for replication\r\nSET GLOBAL binlog_format = 'ROW';\r\n\r\n-- Monitor replication status\r\nSHOW PROCESSLIST;\r\nSHOW BINARY LOGS;\n"})}),"\n",(0,l.jsx)(e.h2,{id:"monitoring",children:"Monitoring"}),"\n",(0,l.jsx)(e.h3,{id:"health-checks",children:"Health Checks"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-python",children:"def health_check():\r\n    try:\r\n        conn = mysql.connector.connect(\r\n            host='localhost',\r\n            user='mlflow',\r\n            password='mlflow_password',\r\n            database='mlflow'\r\n        )\r\n        cursor = conn.cursor()\r\n        cursor.execute(\"SELECT 1\")\r\n        cursor.close()\r\n        conn.close()\r\n        return True\r\n    except Exception as e:\r\n        print(f\"Health check failed: {e}\")\r\n        return False\n"})}),"\n",(0,l.jsx)(e.h3,{id:"key-metrics",children:"Key Metrics"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sql",children:"-- Check current connections\r\nSHOW PROCESSLIST;\r\nSHOW STATUS LIKE 'Threads%';\r\n\r\n-- Monitor slow queries\r\nSET GLOBAL slow_query_log = 'ON';\r\nSET GLOBAL long_query_time = 2;\r\n\r\n-- Check buffer pool efficiency\r\nSHOW STATUS LIKE 'Innodb_buffer_pool%';\r\n\r\n-- Monitor replication lag\r\nSHOW SLAVE STATUS\\G\n"})}),"\n",(0,l.jsx)(e.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"Use InnoDB"})," - Better for ACID transactions"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"Regular backups"})," - Daily full + hourly incremental"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"Monitoring"})," - Track slow queries and connections"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"Replication"})," - For high availability"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"Partitioning"})," - For large tables"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"Connection pooling"})," - Efficient resource management"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"Upgrade regularly"})," - Stay current with security patches"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,l.jsx)(e.h3,{id:"connection-issues",children:"Connection Issues"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:'# Check if MySQL is running\r\nmysql -h localhost -u root -p -e "SELECT 1"\r\n\r\n# Check port availability\r\nnetstat -an | grep 3306\r\n\r\n# Check logs\r\ntail -f /var/log/mysql/error.log\n'})}),"\n",(0,l.jsx)(e.h3,{id:"performance-issues",children:"Performance Issues"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sql",children:"-- Find slow queries\r\nSELECT * FROM mysql.slow_log ORDER BY start_time DESC LIMIT 10;\r\n\r\n-- Check table size\r\nSELECT table_name, ROUND(((data_length + index_length) / 1024 / 1024), 2) AS size_mb\r\nFROM information_schema.tables\r\nWHERE table_schema = 'mlflow'\r\nORDER BY size_mb DESC;\r\n\r\n-- Rebuild table\r\nOPTIMIZE TABLE metrics;\n"})}),"\n",(0,l.jsx)(e.h3,{id:"replication-lag",children:"Replication Lag"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sql",children:"-- Check replica status\r\nSHOW SLAVE STATUS\\G\r\n\r\n-- If slave is lagging, restart it\r\nSTOP SLAVE;\r\nSTART SLAVE;\r\n\r\n-- Skip problematic events if needed\r\nSET GLOBAL SQL_SLAVE_SKIP_COUNTER = 1;\r\nSTART SLAVE;\n"})}),"\n",(0,l.jsx)(e.h2,{id:"further-reading",children:"Further Reading"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://dev.mysql.com/doc/",children:"MySQL Official Documentation"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://dev.mysql.com/doc/refman/8.0/en/innodb-storage-engine.html",children:"InnoDB Storage Engine"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://dev.mysql.com/doc/refman/8.0/en/replication.html",children:"MySQL Replication"})}),"\n"]})]})}function u(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(d,{...n})}):d(n)}},8453:function(n,e,r){r.d(e,{R:function(){return o},x:function(){return t}});var i=r(6540);const l={},s=i.createContext(l);function o(n){const e=i.useContext(s);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:o(n.components),i.createElement(s.Provider,{value:e},n.children)}}}]);