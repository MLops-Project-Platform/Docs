"use strict";(self.webpackChunkmlops_documentation=self.webpackChunkmlops_documentation||[]).push([[8152],{8157:function(n,e,i){i.r(e),i.d(e,{assets:function(){return a},contentTitle:function(){return s},default:function(){return m},frontMatter:function(){return l},metadata:function(){return o},toc:function(){return c}});var o=JSON.parse('{"id":"tools/minio","title":"MinIO (S3 Storage)","description":"What is MinIO?","source":"@site/docs/tools/minio.md","sourceDirName":"tools","slug":"/tools/minio","permalink":"/docs/tools/minio","draft":false,"unlisted":false,"editUrl":"https://github.com/MLops-Project-Platform/documentation/tree/main/docs/tools/minio.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"NVIDIA GPU Scheduling","permalink":"/docs/tools/gpu-scheduling"},"next":{"title":"Database Overview","permalink":"/docs/tools/db-overview"}}'),r=i(4848),t=i(8453);const l={sidebar_position:4},s="MinIO (S3 Storage)",a={},c=[{value:"What is MinIO?",id:"what-is-minio",level:2},{value:"Role in MLOps Platform",id:"role-in-mlops-platform",level:2},{value:"Key Concepts",id:"key-concepts",level:2},{value:"Buckets",id:"buckets",level:3},{value:"Objects",id:"objects",level:3},{value:"Configuration",id:"configuration",level:2},{value:"Environment Variables",id:"environment-variables",level:3},{value:"docker-compose Configuration",id:"docker-compose-configuration",level:3},{value:"Access Methods",id:"access-methods",level:2},{value:"Via Python (boto3)",id:"via-python-boto3",level:3},{value:"Via MinIO Console",id:"via-minio-console",level:3},{value:"Via MinIO Client (mc)",id:"via-minio-client-mc",level:3},{value:"Common Operations",id:"common-operations",level:2},{value:"Create Bucket for Experiment",id:"create-bucket-for-experiment",level:3},{value:"Set Bucket Policy",id:"set-bucket-policy",level:3},{value:"Monitor Bucket Usage",id:"monitor-bucket-usage",level:3},{value:"Integration with MLflow",id:"integration-with-mlflow",level:2},{value:"Backup and Disaster Recovery",id:"backup-and-disaster-recovery",level:2},{value:"Backup Bucket Data",id:"backup-bucket-data",level:3},{value:"Restore Bucket Data",id:"restore-bucket-data",level:3},{value:"Performance Optimization",id:"performance-optimization",level:2},{value:"Upload Optimization",id:"upload-optimization",level:3},{value:"Connection Pooling",id:"connection-pooling",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Can&#39;t Connect to MinIO",id:"cant-connect-to-minio",level:3},{value:"Authentication Issues",id:"authentication-issues",level:3},{value:"Disk Space Issues",id:"disk-space-issues",level:3}];function d(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"minio-s3-storage",children:"MinIO (S3 Storage)"})}),"\n",(0,r.jsx)(e.h2,{id:"what-is-minio",children:"What is MinIO?"}),"\n",(0,r.jsx)(e.p,{children:"MinIO is a high-performance, S3-compatible object storage server. It provides an Amazon S3-like interface for storing artifacts, models, and data."}),"\n",(0,r.jsx)(e.h2,{id:"role-in-mlops-platform",children:"Role in MLOps Platform"}),"\n",(0,r.jsx)(e.p,{children:"MinIO stores:"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Model artifacts"})," - Trained models in various formats"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Training artifacts"})," - Plots, logs, datasets"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Experiment data"})," - Data files generated during runs"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Large files"})," - Models too big for database"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"key-concepts",children:"Key Concepts"}),"\n",(0,r.jsx)(e.h3,{id:"buckets",children:"Buckets"}),"\n",(0,r.jsx)(e.p,{children:"Container for objects, similar to S3 buckets."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Create bucket\r\nmc mb minio/mlflow-artifacts\r\n\r\n# List buckets\r\nmc ls minio\r\n\r\n# Remove bucket\r\nmc rb minio/mlflow-artifacts\n"})}),"\n",(0,r.jsx)(e.h3,{id:"objects",children:"Objects"}),"\n",(0,r.jsx)(e.p,{children:"Individual files stored in buckets."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Upload file\r\nmc cp model.pkl minio/mlflow-artifacts/model.pkl\r\n\r\n# Download file\r\nmc cp minio/mlflow-artifacts/model.pkl ./\r\n\r\n# List objects\r\nmc ls minio/mlflow-artifacts\n"})}),"\n",(0,r.jsx)(e.h2,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsx)(e.h3,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Endpoint URL\r\nMLFLOW_S3_ENDPOINT_URL=http://minio:9000\r\n\r\n# AWS credentials (for S3 access)\r\nAWS_ACCESS_KEY_ID=minioadmin\r\nAWS_SECRET_ACCESS_KEY=minioadmin123\r\n\r\n# Default artifact root\r\nMLFLOW_DEFAULT_ARTIFACT_ROOT=s3://mlflow-artifacts\n"})}),"\n",(0,r.jsx)(e.h3,{id:"docker-compose-configuration",children:"docker-compose Configuration"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-yaml",children:'minio:\r\n  image: minio/minio:latest\r\n  environment:\r\n    MINIO_ROOT_USER: minioadmin\r\n    MINIO_ROOT_PASSWORD: minioadmin123\r\n  ports:\r\n    - "9000:9000"      # API port\r\n    - "9001:9001"      # Console port\r\n  volumes:\r\n    - minio_data:/data\r\n  command: server /data --console-address ":9001"\n'})}),"\n",(0,r.jsx)(e.h2,{id:"access-methods",children:"Access Methods"}),"\n",(0,r.jsx)(e.h3,{id:"via-python-boto3",children:"Via Python (boto3)"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"import boto3\r\n\r\n# Create S3 client pointing to MinIO\r\ns3_client = boto3.client(\r\n    's3',\r\n    endpoint_url='http://localhost:9000',\r\n    aws_access_key_id='minioadmin',\r\n    aws_secret_access_key='minioadmin123'\r\n)\r\n\r\n# Upload file\r\ns3_client.put_object(\r\n    Bucket='mlflow-artifacts',\r\n    Key='model.pkl',\r\n    Body=open('model.pkl', 'rb')\r\n)\r\n\r\n# Download file\r\ns3_client.download_file(\r\n    'mlflow-artifacts',\r\n    'model.pkl',\r\n    'downloaded_model.pkl'\r\n)\r\n\r\n# List objects\r\nresponse = s3_client.list_objects_v2(Bucket='mlflow-artifacts')\r\nfor obj in response['Contents']:\r\n    print(obj['Key'])\n"})}),"\n",(0,r.jsx)(e.h3,{id:"via-minio-console",children:"Via MinIO Console"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["Open ",(0,r.jsx)(e.a,{href:"http://localhost:9001",children:"http://localhost:9001"})]}),"\n",(0,r.jsxs)(e.li,{children:["Login with ",(0,r.jsx)(e.code,{children:"minioadmin"})," / ",(0,r.jsx)(e.code,{children:"minioadmin123"})]}),"\n",(0,r.jsx)(e.li,{children:"Browse buckets and objects visually"}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"via-minio-client-mc",children:"Via MinIO Client (mc)"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Configure MinIO alias\r\nmc alias set minio http://localhost:9000 minioadmin minioadmin123\r\n\r\n# List buckets\r\nmc ls minio\r\n\r\n# Upload file\r\nmc cp model.pkl minio/mlflow-artifacts/\r\n\r\n# Download file\r\nmc cp minio/mlflow-artifacts/model.pkl ./\r\n\r\n# Remove file\r\nmc rm minio/mlflow-artifacts/model.pkl\n"})}),"\n",(0,r.jsx)(e.h2,{id:"common-operations",children:"Common Operations"}),"\n",(0,r.jsx)(e.h3,{id:"create-bucket-for-experiment",children:"Create Bucket for Experiment"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"import boto3\r\n\r\ns3_client = boto3.client(\r\n    's3',\r\n    endpoint_url='http://localhost:9000',\r\n    aws_access_key_id='minioadmin',\r\n    aws_secret_access_key='minioadmin123'\r\n)\r\n\r\n# Create new bucket for specific experiment\r\nbucket_name = 'experiment-2024-01'\r\ns3_client.create_bucket(Bucket=bucket_name)\n"})}),"\n",(0,r.jsx)(e.h3,{id:"set-bucket-policy",children:"Set Bucket Policy"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Make bucket public (for sharing)\r\nmc policy set public minio/mlflow-artifacts\n"})}),"\n",(0,r.jsx)(e.h3,{id:"monitor-bucket-usage",children:"Monitor Bucket Usage"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Check bucket size\r\nmc du minio/mlflow-artifacts\r\n\r\n# List with details\r\nmc ls --recursive minio/mlflow-artifacts/\n"})}),"\n",(0,r.jsx)(e.h2,{id:"integration-with-mlflow",children:"Integration with MLflow"}),"\n",(0,r.jsx)(e.p,{children:"MLflow automatically stores artifacts in MinIO when configured:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:'import mlflow\r\n\r\n# Configure MLflow with MinIO\r\nmlflow.set_tracking_uri("http://localhost:5000")\r\n\r\nwith mlflow.start_run():\r\n    # Log metrics\r\n    mlflow.log_metric("accuracy", 0.95)\r\n    \r\n    # Save and log model (auto-uploaded to MinIO)\r\n    mlflow.sklearn.log_model(model, "model")\r\n    \r\n    # Log artifact file (auto-uploaded to MinIO)\r\n    mlflow.log_artifact("plot.png")\n'})}),"\n",(0,r.jsx)(e.h2,{id:"backup-and-disaster-recovery",children:"Backup and Disaster Recovery"}),"\n",(0,r.jsx)(e.h3,{id:"backup-bucket-data",children:"Backup Bucket Data"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Using mc mirror\r\nmc mirror minio/mlflow-artifacts ./backup/\r\n\r\n# Create backup bucket\r\nmc mb minio/backup\r\nmc mirror minio/mlflow-artifacts minio/backup\n"})}),"\n",(0,r.jsx)(e.h3,{id:"restore-bucket-data",children:"Restore Bucket Data"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Mirror from backup\r\nmc mirror ./backup minio/mlflow-artifacts\r\n\r\n# Or from another bucket\r\nmc mirror minio/backup minio/mlflow-artifacts\n"})}),"\n",(0,r.jsx)(e.h2,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,r.jsx)(e.h3,{id:"upload-optimization",children:"Upload Optimization"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"# Use multipart upload for large files\r\nimport boto3\r\n\r\ns3_client = boto3.client(\r\n    's3',\r\n    endpoint_url='http://localhost:9000',\r\n    aws_access_key_id='minioadmin',\r\n    aws_secret_access_key='minioadmin123'\r\n)\r\n\r\n# Upload with parallel parts\r\nfrom boto3.s3.transfer import TransferConfig\r\n\r\nconfig = TransferConfig(\r\n    multipart_threshold=1024 * 25,  # 25 MB\r\n    max_concurrency=10,\r\n    multipart_chunksize=1024 * 25,\r\n    use_threads=True\r\n)\r\n\r\ns3_client.upload_file(\r\n    'large_file.pkl',\r\n    'mlflow-artifacts',\r\n    'large_file.pkl',\r\n    Config=config\r\n)\n"})}),"\n",(0,r.jsx)(e.h3,{id:"connection-pooling",children:"Connection Pooling"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"import boto3\r\nfrom botocore.config import Config\r\n\r\n# Configure with connection pooling\r\nconfig = Config(\r\n    max_pool_connections=50,\r\n    retries={'max_attempts': 3}\r\n)\r\n\r\ns3_client = boto3.client(\r\n    's3',\r\n    endpoint_url='http://localhost:9000',\r\n    aws_access_key_id='minioadmin',\r\n    aws_secret_access_key='minioadmin123',\r\n    config=config\r\n)\n"})}),"\n",(0,r.jsx)(e.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(e.h3,{id:"cant-connect-to-minio",children:"Can't Connect to MinIO"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Check if MinIO is running\r\ndocker compose ps minio\r\n\r\n# Check logs\r\ndocker compose logs minio\r\n\r\n# Test connection\r\ncurl -u minioadmin:minioadmin123 http://localhost:9000/minio/health/live\n"})}),"\n",(0,r.jsx)(e.h3,{id:"authentication-issues",children:"Authentication Issues"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Verify credentials\r\nmc alias set test-minio http://localhost:9000 \\\r\n  minioadmin minioadmin123\r\nmc ls test-minio\r\n\r\n# Reset credentials\r\ndocker compose down\r\n# Remove volume if needed\r\ndocker compose down -v\r\ndocker compose up -d\n"})}),"\n",(0,r.jsx)(e.h3,{id:"disk-space-issues",children:"Disk Space Issues"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Check MinIO disk usage\r\ndocker compose exec minio \\\r\n  du -sh /data\r\n\r\n# Clean up old objects\r\nmc rm --recursive --force minio/old-bucket\n"})}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsxs)(e.p,{children:["See ",(0,r.jsx)(e.a,{href:"/docs/researcher-guide/training",children:"Researcher Guide"})," for practical artifact logging examples."]})]})}function m(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(d,{...n})}):d(n)}},8453:function(n,e,i){i.d(e,{R:function(){return l},x:function(){return s}});var o=i(6540);const r={},t=o.createContext(r);function l(n){const e=o.useContext(t);return o.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:l(n.components),o.createElement(t.Provider,{value:e},n.children)}}}]);