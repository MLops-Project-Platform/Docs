"use strict";(self.webpackChunkmlops_documentation=self.webpackChunkmlops_documentation||[]).push([[5384],{6982:function(e,n,r){r.r(n),r.d(n,{assets:function(){return d},contentTitle:function(){return o},default:function(){return m},frontMatter:function(){return s},metadata:function(){return t},toc:function(){return l}});var t=JSON.parse('{"id":"tools/dynamodb","title":"Amazon DynamoDB","description":"Overview","source":"@site/docs/tools/dynamodb.md","sourceDirName":"tools","slug":"/tools/dynamodb","permalink":"/docs/tools/dynamodb","draft":false,"unlisted":false,"editUrl":"https://github.com/MLops-Project-Platform/documentation/tree/main/docs/tools/dynamodb.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Apache Cassandra","permalink":"/docs/tools/cassandra"},"next":{"title":"Redis","permalink":"/docs/tools/redis"}}'),a=r(4848),i=r(8453);const s={sidebar_position:3},o="Amazon DynamoDB",d={},l=[{value:"Overview",id:"overview",level:2},{value:"Key Features",id:"key-features",level:2},{value:"Use Cases in MLOps",id:"use-cases-in-mlops",level:2},{value:"Experiment Metadata Storage",id:"experiment-metadata-storage",level:3},{value:"Setup",id:"setup",level:2},{value:"Infrastructure as Code",id:"infrastructure-as-code",level:3},{value:"CloudFormation Template",id:"cloudformation-template",level:3},{value:"Query Operations",id:"query-operations",level:2},{value:"Basic CRUD",id:"basic-crud",level:3},{value:"Query and Scan",id:"query-and-scan",level:3},{value:"Advanced Features",id:"advanced-features",level:2},{value:"Batch Operations",id:"batch-operations",level:3},{value:"DynamoDB Streams",id:"dynamodb-streams",level:3},{value:"Global Tables (Multi-Region)",id:"global-tables-multi-region",level:3},{value:"Monitoring and Performance",id:"monitoring-and-performance",level:2},{value:"CloudWatch Metrics",id:"cloudwatch-metrics",level:3},{value:"Enable TTL (Auto-expiration)",id:"enable-ttl-auto-expiration",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Comparison: On-Demand vs Provisioned",id:"comparison-on-demand-vs-provisioned",level:2},{value:"Further Reading",id:"further-reading",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"amazon-dynamodb",children:"Amazon DynamoDB"})}),"\n",(0,a.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,a.jsx)(n.p,{children:"Amazon DynamoDB is a fully managed NoSQL database service offered by AWS. It provides automatic scaling, built-in security, and serverless operation - ideal for MLOps platforms running on AWS."}),"\n",(0,a.jsx)(n.h2,{id:"key-features",children:"Key Features"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Fully Managed"})," - No infrastructure management required"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Auto-scaling"})," - Automatically adjusts capacity"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Global Tables"})," - Multi-region replication"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Point-in-Time Recovery"})," - Restore to any point in time"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Encryption"})," - At-rest and in-transit encryption"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Pay-per-request"})," - Or provisioned capacity"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"use-cases-in-mlops",children:"Use Cases in MLOps"}),"\n",(0,a.jsx)(n.h3,{id:"experiment-metadata-storage",children:"Experiment Metadata Storage"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"import boto3\r\nfrom datetime import datetime\r\nimport json\r\n\r\n# Create DynamoDB resource\r\ndynamodb = boto3.resource('dynamodb', region_name='us-east-1')\r\ntable = dynamodb.Table('mlops-experiments')\r\n\r\n# Create experiment record\r\nexperiment = {\r\n    'experiment_id': 'exp_001',\r\n    'name': 'bert-fine-tuning',\r\n    'version': '1.0',\r\n    'created_at': int(datetime.now().timestamp()),\r\n    'status': 'completed',\r\n    'config': {\r\n        'batch_size': 32,\r\n        'learning_rate': 0.001,\r\n        'epochs': 10\r\n    },\r\n    'metrics': {\r\n        'accuracy': 0.95,\r\n        'f1_score': 0.93,\r\n        'loss': 0.05\r\n    }\r\n}\r\n\r\n# Put item\r\nresponse = table.put_item(Item=experiment)\r\n\r\n# Retrieve experiment\r\nresponse = table.get_item(Key={'experiment_id': 'exp_001'})\r\nexperiment = response['Item']\n"})}),"\n",(0,a.jsx)(n.h2,{id:"setup",children:"Setup"}),"\n",(0,a.jsx)(n.h3,{id:"infrastructure-as-code",children:"Infrastructure as Code"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"import boto3\r\n\r\n# Create DynamoDB table\r\ndynamodb = boto3.client('dynamodb', region_name='us-east-1')\r\n\r\n# Experiments table\r\ndynamodb.create_table(\r\n    TableName='mlops-experiments',\r\n    KeySchema=[\r\n        {'AttributeName': 'experiment_id', 'KeyType': 'HASH'},\r\n        {'AttributeName': 'created_at', 'KeyType': 'RANGE'}\r\n    ],\r\n    AttributeDefinitions=[\r\n        {'AttributeName': 'experiment_id', 'AttributeType': 'S'},\r\n        {'AttributeName': 'created_at', 'AttributeType': 'N'},\r\n        {'AttributeName': 'status', 'AttributeType': 'S'}\r\n    ],\r\n    BillingMode='PAY_PER_REQUEST',  # Auto-scaling\r\n    GlobalSecondaryIndexes=[\r\n        {\r\n            'IndexName': 'status-created_at-index',\r\n            'KeySchema': [\r\n                {'AttributeName': 'status', 'KeyType': 'HASH'},\r\n                {'AttributeName': 'created_at', 'KeyType': 'RANGE'}\r\n            ],\r\n            'Projection': {'ProjectionType': 'ALL'}\r\n        }\r\n    ],\r\n    Tags=[\r\n        {'Key': 'Environment', 'Value': 'production'},\r\n        {'Key': 'Application', 'Value': 'mlops'}\r\n    ]\r\n)\n"})}),"\n",(0,a.jsx)(n.h3,{id:"cloudformation-template",children:"CloudFormation Template"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"AWSTemplateFormatVersion: '2010-09-09'\r\nResources:\r\n  ExperimentsTable:\r\n    Type: AWS::DynamoDB::Table\r\n    Properties:\r\n      TableName: mlops-experiments\r\n      BillingMode: PAY_PER_REQUEST\r\n      StreamSpecification:\r\n        StreamViewType: NEW_AND_OLD_IMAGES\r\n      AttributeDefinitions:\r\n        - AttributeName: experiment_id\r\n          AttributeType: S\r\n        - AttributeName: created_at\r\n          AttributeType: N\r\n        - AttributeName: status\r\n          AttributeType: S\r\n      KeySchema:\r\n        - AttributeName: experiment_id\r\n          KeyType: HASH\r\n        - AttributeName: created_at\r\n          KeyType: RANGE\r\n      GlobalSecondaryIndexes:\r\n        - IndexName: status-created_at-index\r\n          KeySchema:\r\n            - AttributeName: status\r\n              KeyType: HASH\r\n            - AttributeName: created_at\r\n              KeyType: RANGE\r\n          Projection:\r\n            ProjectionType: ALL\r\n      PointInTimeRecoverySpecification:\r\n        PointInTimeRecoveryEnabled: true\r\n      Tags:\r\n        - Key: Application\r\n          Value: mlops\n"})}),"\n",(0,a.jsx)(n.h2,{id:"query-operations",children:"Query Operations"}),"\n",(0,a.jsx)(n.h3,{id:"basic-crud",children:"Basic CRUD"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"import boto3\r\nfrom datetime import datetime\r\n\r\ndynamodb = boto3.resource('dynamodb', region_name='us-east-1')\r\ntable = dynamodb.Table('mlops-experiments')\r\n\r\n# Create\r\nexperiment = {\r\n    'experiment_id': 'exp_002',\r\n    'created_at': int(datetime.now().timestamp()),\r\n    'name': 'vit-classifier',\r\n    'status': 'running'\r\n}\r\ntable.put_item(Item=experiment)\r\n\r\n# Read\r\nresponse = table.get_item(\r\n    Key={\r\n        'experiment_id': 'exp_002',\r\n        'created_at': 1700000000\r\n    }\r\n)\r\nitem = response.get('Item')\r\n\r\n# Update\r\ntable.update_item(\r\n    Key={\r\n        'experiment_id': 'exp_002',\r\n        'created_at': 1700000000\r\n    },\r\n    UpdateExpression='SET #status = :status, #updated = :updated',\r\n    ExpressionAttributeNames={\r\n        '#status': 'status',\r\n        '#updated': 'updated_at'\r\n    },\r\n    ExpressionAttributeValues={\r\n        ':status': 'completed',\r\n        ':updated': int(datetime.now().timestamp())\r\n    }\r\n)\r\n\r\n# Delete\r\ntable.delete_item(\r\n    Key={\r\n        'experiment_id': 'exp_002',\r\n        'created_at': 1700000000\r\n    }\r\n)\n"})}),"\n",(0,a.jsx)(n.h3,{id:"query-and-scan",children:"Query and Scan"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"from boto3.dynamodb.conditions import Key, Attr\r\n\r\n# Query by partition key\r\nresponse = table.query(\r\n    KeyConditionExpression=Key('experiment_id').eq('exp_002')\r\n)\r\n\r\n# Query with range key\r\nresponse = table.query(\r\n    KeyConditionExpression=Key('experiment_id').eq('exp_002') & \r\n                          Key('created_at').between(1700000000, 1700100000)\r\n)\r\n\r\n# Query using GSI\r\nresponse = table.query(\r\n    IndexName='status-created_at-index',\r\n    KeyConditionExpression=Key('status').eq('completed'),\r\n    ScanIndexForward=False  # Descending order\r\n)\r\n\r\n# Scan with filter\r\nresponse = table.scan(\r\n    FilterExpression=Attr('metrics.accuracy').gt(0.9) & \r\n                    Attr('status').eq('completed')\r\n)\r\n\r\n# Process results\r\nfor item in response['Items']:\r\n    print(f\"{item['experiment_id']}: {item['metrics']['accuracy']}\")\n"})}),"\n",(0,a.jsx)(n.h2,{id:"advanced-features",children:"Advanced Features"}),"\n",(0,a.jsx)(n.h3,{id:"batch-operations",children:"Batch Operations"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"# Batch write\r\nwith table.batch_writer(batch_size=25) as batch:\r\n    for i in range(100):\r\n        batch.put_item(Item={\r\n            'experiment_id': f'exp_{i}',\r\n            'created_at': int(datetime.now().timestamp()),\r\n            'status': 'pending'\r\n        })\r\n\r\n# Batch get\r\ndynamodb_client = boto3.client('dynamodb', region_name='us-east-1')\r\nresponse = dynamodb_client.batch_get_item(\r\n    RequestItems={\r\n        'mlops-experiments': {\r\n            'Keys': [\r\n                {'experiment_id': {'S': 'exp_001'}, 'created_at': {'N': '1700000000'}},\r\n                {'experiment_id': {'S': 'exp_002'}, 'created_at': {'N': '1700000001'}}\r\n            ]\r\n        }\r\n    }\r\n)\n"})}),"\n",(0,a.jsx)(n.h3,{id:"dynamodb-streams",children:"DynamoDB Streams"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"# Enable streams and process changes\r\ndef process_stream_record(record):\r\n    if record['eventName'] == 'INSERT':\r\n        item = record['dynamodb']['NewImage']\r\n        print(f\"New experiment: {item['experiment_id']['S']}\")\r\n    elif record['eventName'] == 'MODIFY':\r\n        old = record['dynamodb']['OldImage']\r\n        new = record['dynamodb']['NewImage']\r\n        print(f\"Updated: {old} -> {new}\")\r\n\r\n# Lambda handler\r\ndef lambda_handler(event, context):\r\n    for record in event['Records']:\r\n        process_stream_record(record)\r\n    return {'statusCode': 200}\n"})}),"\n",(0,a.jsx)(n.h3,{id:"global-tables-multi-region",children:"Global Tables (Multi-Region)"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"# Create global table\r\ndynamodb_client = boto3.client('dynamodb', region_name='us-east-1')\r\n\r\ndynamodb_client.create_global_table(\r\n    GlobalTableName='mlops-experiments',\r\n    ReplicationGroup=[\r\n        {'RegionName': 'us-east-1'},\r\n        {'RegionName': 'eu-west-1'},\r\n        {'RegionName': 'ap-southeast-1'}\r\n    ]\r\n)\r\n\r\n# Data automatically replicates across regions\n"})}),"\n",(0,a.jsx)(n.h2,{id:"monitoring-and-performance",children:"Monitoring and Performance"}),"\n",(0,a.jsx)(n.h3,{id:"cloudwatch-metrics",children:"CloudWatch Metrics"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"import boto3\r\n\r\ncloudwatch = boto3.client('cloudwatch', region_name='us-east-1')\r\n\r\n# Get table metrics\r\nresponse = cloudwatch.get_metric_statistics(\r\n    Namespace='AWS/DynamoDB',\r\n    MetricName='ConsumedReadCapacityUnits',\r\n    Dimensions=[{'Name': 'TableName', 'Value': 'mlops-experiments'}],\r\n    StartTime=datetime(2024, 1, 1),\r\n    EndTime=datetime(2024, 1, 31),\r\n    Period=3600,\r\n    Statistics=['Sum', 'Average']\r\n)\r\n\r\nfor datapoint in response['Datapoints']:\r\n    print(f\"{datapoint['Timestamp']}: {datapoint['Sum']} RCU\")\n"})}),"\n",(0,a.jsx)(n.h3,{id:"enable-ttl-auto-expiration",children:"Enable TTL (Auto-expiration)"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"dynamodb_client = boto3.client('dynamodb', region_name='us-east-1')\r\n\r\ndynamodb_client.update_time_to_live(\r\n    TableName='mlops-experiments',\r\n    TimeToLiveSpecification={\r\n        'AttributeName': 'expiration_time',\r\n        'Enabled': True\r\n    }\r\n)\r\n\r\n# Store with TTL\r\ntable.put_item(Item={\r\n    'experiment_id': 'exp_temp',\r\n    'created_at': int(datetime.now().timestamp()),\r\n    'expiration_time': int(datetime.now().timestamp()) + 86400  # Expires in 24 hours\r\n})\n"})}),"\n",(0,a.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Choose right key design"})," - Ensure even distribution"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Use GSI wisely"})," - Each index has a cost"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Enable Point-in-Time Recovery"})," - For production tables"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Monitor RCU/WCU"})," - Avoid throttling"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Batch operations"})," - Reduce API calls"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Use TTL"})," - Auto-delete old data"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Enable encryption"})," - For sensitive data"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"comparison-on-demand-vs-provisioned",children:"Comparison: On-Demand vs Provisioned"}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Aspect"}),(0,a.jsx)(n.th,{children:"On-Demand"}),(0,a.jsx)(n.th,{children:"Provisioned"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Scaling"}),(0,a.jsx)(n.td,{children:"Automatic, instant"}),(0,a.jsx)(n.td,{children:"Manual or auto-scaling"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Cost"}),(0,a.jsx)(n.td,{children:"Per request"}),(0,a.jsx)(n.td,{children:"Fixed + usage"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Best for"}),(0,a.jsx)(n.td,{children:"Unpredictable workloads"}),(0,a.jsx)(n.td,{children:"Predictable, steady workloads"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Latency"}),(0,a.jsx)(n.td,{children:"Slightly higher"}),(0,a.jsx)(n.td,{children:"Lower, consistent"})]})]})]}),"\n",(0,a.jsx)(n.h2,{id:"further-reading",children:"Further Reading"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://docs.aws.amazon.com/dynamodb/",children:"DynamoDB Documentation"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/best-practices.html",children:"DynamoDB Best Practices"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/dynamodb.html",children:"Boto3 DynamoDB Guide"})}),"\n"]})]})}function m(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},8453:function(e,n,r){r.d(n,{R:function(){return s},x:function(){return o}});var t=r(6540);const a={},i=t.createContext(a);function s(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);