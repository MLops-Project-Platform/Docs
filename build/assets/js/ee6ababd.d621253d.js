"use strict";(self.webpackChunkmlops_documentation=self.webpackChunkmlops_documentation||[]).push([[6891],{2832:function(e,n,r){r.r(n),r.d(n,{assets:function(){return o},contentTitle:function(){return a},default:function(){return p},frontMatter:function(){return l},metadata:function(){return t},toc:function(){return c}});var t=JSON.parse('{"id":"repositories/mlops-research-template","title":"mlops-research-template","description":"Repository: MLops-Project-Platform/mlops-research-template","source":"@site/docs/repositories/mlops-research-template.md","sourceDirName":"repositories","slug":"/repositories/mlops-research-template","permalink":"/docs/repositories/mlops-research-template","draft":false,"unlisted":false,"editUrl":"https://github.com/MLops-Project-Platform/documentation/tree/main/docs/repositories/mlops-research-template.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3}}'),i=r(4848),s=r(8453);const l={sidebar_position:3},a="mlops-research-template",o={},c=[{value:"Purpose",id:"purpose",level:2},{value:"Repository Structure",id:"repository-structure",level:2},{value:"When to Use",id:"when-to-use",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"1. Clone Template",id:"1-clone-template",level:3},{value:"2. Set Up Environment",id:"2-set-up-environment",level:3},{value:"3. Start MLflow Platform",id:"3-start-mlflow-platform",level:3},{value:"4. Run Training",id:"4-run-training",level:3},{value:"5. View Results",id:"5-view-results",level:3},{value:"Configuration System",id:"configuration-system",level:2},{value:"Default Configuration",id:"default-configuration",level:3},{value:"Custom Configuration",id:"custom-configuration",level:3},{value:"Training Script Structure",id:"training-script-structure",level:2},{value:"Basic Training Script",id:"basic-training-script",level:3},{value:"Experiment Tracking Patterns",id:"experiment-tracking-patterns",level:2},{value:"Pattern 1: Simple Metrics Logging",id:"pattern-1-simple-metrics-logging",level:3},{value:"Pattern 2: With Parameters",id:"pattern-2-with-parameters",level:3},{value:"Pattern 3: With Artifacts",id:"pattern-3-with-artifacts",level:3},{value:"MLflow Integration",id:"mlflow-integration",level:2},{value:"Basic Integration",id:"basic-integration",level:3},{value:"Advanced Integration",id:"advanced-integration",level:3},{value:"Dependencies",id:"dependencies",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Extending the Template",id:"extending-the-template",level:2},{value:"Add Custom Preprocessing",id:"add-custom-preprocessing",level:3},{value:"Add Evaluation Module",id:"add-evaluation-module",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Can&#39;t Connect to MLflow",id:"cant-connect-to-mlflow",level:3},{value:"Dependencies Not Found",id:"dependencies-not-found",level:3},{value:"Permission Errors",id:"permission-errors",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"mlops-research-template",children:"mlops-research-template"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Repository:"})," ",(0,i.jsx)(n.code,{children:"MLops-Project-Platform/mlops-research-template"})]}),"\n",(0,i.jsx)(n.p,{children:"A standardized template for ML research and training projects. Use this to build and track your experiments with the MLOps platform."}),"\n",(0,i.jsx)(n.h2,{id:"purpose",children:"Purpose"}),"\n",(0,i.jsx)(n.p,{children:"mlops-research-template provides:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Project structure for ML experiments"}),"\n",(0,i.jsx)(n.li,{children:"Configuration management system"}),"\n",(0,i.jsx)(n.li,{children:"MLflow integration for tracking"}),"\n",(0,i.jsx)(n.li,{children:"Reproducible training pipeline"}),"\n",(0,i.jsx)(n.li,{children:"Best practices for ML code"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"repository-structure",children:"Repository Structure"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"mlops-research-template/\r\n\u251c\u2500\u2500 pyproject.toml          # Project metadata & dependencies\r\n\u251c\u2500\u2500 README.md               # Project documentation\r\n\u251c\u2500\u2500 requirements.txt        # Python dependencies\r\n\u2502\r\n\u251c\u2500\u2500 src/                    # Source code\r\n\u2502   \u251c\u2500\u2500 __init__.py\r\n\u2502   \u2514\u2500\u2500 train.py            # Main training script\r\n\u2502\r\n\u251c\u2500\u2500 configs/                # Configuration files\r\n\u2502   \u2514\u2500\u2500 default.yaml        # Default configuration\r\n\u2502\r\n\u2514\u2500\u2500 .gitignore\n"})}),"\n",(0,i.jsx)(n.h2,{id:"when-to-use",children:"When to Use"}),"\n",(0,i.jsxs)(n.p,{children:["\u2705 ",(0,i.jsx)(n.strong,{children:"Use this template for:"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"ML research and experimentation"}),"\n",(0,i.jsx)(n.li,{children:"Training models"}),"\n",(0,i.jsx)(n.li,{children:"Hyperparameter tuning"}),"\n",(0,i.jsx)(n.li,{children:"Benchmarking approaches"}),"\n",(0,i.jsx)(n.li,{children:"Proof of concepts"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u274c ",(0,i.jsx)(n.strong,{children:"Don't use this for:"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Infrastructure setup (use mlops-platform)"}),"\n",(0,i.jsx)(n.li,{children:"Infrastructure deployment (use mlops-helm-charts)"}),"\n",(0,i.jsx)(n.li,{children:"Production serving (separate service needed)"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,i.jsx)(n.h3,{id:"1-clone-template",children:"1. Clone Template"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/MLops-Project-Platform/mlops-research-template.git\r\ncd mlops-research-template\n"})}),"\n",(0,i.jsx)(n.h3,{id:"2-set-up-environment",children:"2. Set Up Environment"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Create virtual environment\r\npython -m venv .venv\r\n\r\n# Activate\r\nsource .venv/bin/activate        # Mac/Linux\r\n# or\r\n.venv\\Scripts\\activate           # Windows\r\n\r\n# Install dependencies\r\npip install -r requirements.txt\n"})}),"\n",(0,i.jsx)(n.h3,{id:"3-start-mlflow-platform",children:"3. Start MLflow Platform"}),"\n",(0,i.jsx)(n.p,{children:"In another terminal:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd ../mlops-platform/docker-compose\r\ndocker compose up -d\n"})}),"\n",(0,i.jsx)(n.h3,{id:"4-run-training",children:"4. Run Training"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Make sure MLflow is running at http://localhost:5000\r\npython src/train.py\r\n\r\n# Or with custom config\r\npython src/train.py --config configs/custom.yaml\n"})}),"\n",(0,i.jsx)(n.h3,{id:"5-view-results",children:"5. View Results"}),"\n",(0,i.jsxs)(n.p,{children:["Open ",(0,i.jsx)(n.a,{href:"http://localhost:5000",children:"http://localhost:5000"})," in browser to see your experiments."]}),"\n",(0,i.jsx)(n.h2,{id:"configuration-system",children:"Configuration System"}),"\n",(0,i.jsx)(n.h3,{id:"default-configuration",children:"Default Configuration"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"configs/default.yaml"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'# Model parameters\r\nmodel:\r\n  name: "logistic_regression"\r\n  params:\r\n    C: 1.0\r\n    max_iter: 1000\r\n\r\n# Training parameters\r\ntraining:\r\n  test_size: 0.2\r\n  random_state: 42\r\n  validation_split: 0.1\r\n\r\n# MLflow tracking\r\nmlflow:\r\n  tracking_uri: "http://localhost:5000"\r\n  experiment_name: "ml-research"\r\n  run_name: "baseline"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"custom-configuration",children:"Custom Configuration"}),"\n",(0,i.jsxs)(n.p,{children:["Create ",(0,i.jsx)(n.code,{children:"configs/custom.yaml"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'# Override default values\r\nmodel:\r\n  name: "svm"\r\n  params:\r\n    C: 0.1\r\n    kernel: "rbf"\r\n\r\ntraining:\r\n  test_size: 0.25\r\n  random_state: 123\n'})}),"\n",(0,i.jsx)(n.p,{children:"Run with custom config:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"python src/train.py --config configs/custom.yaml\n"})}),"\n",(0,i.jsx)(n.h2,{id:"training-script-structure",children:"Training Script Structure"}),"\n",(0,i.jsx)(n.h3,{id:"basic-training-script",children:"Basic Training Script"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"src/train.py"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import mlflow\r\nimport yaml\r\nimport argparse\r\nfrom sklearn.datasets import load_iris\r\nfrom sklearn.model_selection import train_test_split\r\nfrom sklearn.ensemble import RandomForestClassifier\r\nfrom sklearn.metrics import accuracy_score, precision_score, recall_score\r\n\r\ndef load_config(config_path):\r\n    \"\"\"Load configuration from YAML file.\"\"\"\r\n    with open(config_path, 'r') as f:\r\n        return yaml.safe_load(f)\r\n\r\ndef train():\r\n    \"\"\"Main training function.\"\"\"\r\n    parser = argparse.ArgumentParser()\r\n    parser.add_argument('--config', default='configs/default.yaml')\r\n    args = parser.parse_args()\r\n    \r\n    # Load configuration\r\n    config = load_config(args.config)\r\n    \r\n    # Set MLflow tracking URI\r\n    mlflow.set_tracking_uri(config['mlflow']['tracking_uri'])\r\n    mlflow.set_experiment(config['mlflow']['experiment_name'])\r\n    \r\n    with mlflow.start_run(run_name=config['mlflow']['run_name']):\r\n        # Load data\r\n        data = load_iris()\r\n        X = data.data\r\n        y = data.target\r\n        \r\n        # Train/test split\r\n        X_train, X_test, y_train, y_test = train_test_split(\r\n            X, y,\r\n            test_size=config['training']['test_size'],\r\n            random_state=config['training']['random_state']\r\n        )\r\n        \r\n        # Log parameters\r\n        model_params = config['model']['params']\r\n        for param_name, param_value in model_params.items():\r\n            mlflow.log_param(param_name, param_value)\r\n        \r\n        # Train model\r\n        model = RandomForestClassifier(**model_params)\r\n        model.fit(X_train, y_train)\r\n        \r\n        # Evaluate\r\n        y_pred = model.predict(X_test)\r\n        accuracy = accuracy_score(y_test, y_pred)\r\n        precision = precision_score(y_test, y_pred, average='weighted')\r\n        recall = recall_score(y_test, y_pred, average='weighted')\r\n        \r\n        # Log metrics\r\n        mlflow.log_metric(\"accuracy\", accuracy)\r\n        mlflow.log_metric(\"precision\", precision)\r\n        mlflow.log_metric(\"recall\", recall)\r\n        \r\n        # Log model\r\n        mlflow.sklearn.log_model(model, \"model\")\r\n        \r\n        print(f\"Model accuracy: {accuracy:.4f}\")\r\n\r\nif __name__ == \"__main__\":\r\n    train()\n"})}),"\n",(0,i.jsx)(n.h2,{id:"experiment-tracking-patterns",children:"Experiment Tracking Patterns"}),"\n",(0,i.jsx)(n.h3,{id:"pattern-1-simple-metrics-logging",children:"Pattern 1: Simple Metrics Logging"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import mlflow\r\n\r\nwith mlflow.start_run():\r\n    # Your training code\r\n    accuracy = train_and_evaluate()\r\n    \r\n    # Log metrics\r\n    mlflow.log_metric("accuracy", accuracy)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"pattern-2-with-parameters",children:"Pattern 2: With Parameters"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import mlflow\r\n\r\nhyperparams = {\r\n    "learning_rate": 0.001,\r\n    "batch_size": 32,\r\n    "epochs": 100\r\n}\r\n\r\nwith mlflow.start_run():\r\n    # Log hyperparameters\r\n    mlflow.log_params(hyperparams)\r\n    \r\n    # Training\r\n    model = train(hyperparams)\r\n    metrics = evaluate(model)\r\n    \r\n    # Log results\r\n    mlflow.log_metrics(metrics)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"pattern-3-with-artifacts",children:"Pattern 3: With Artifacts"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import mlflow\r\n\r\nwith mlflow.start_run():\r\n    # Training\r\n    metrics = train_model()\r\n    \r\n    # Save artifacts\r\n    mlflow.log_metric(\"val_loss\", metrics['val_loss'])\r\n    \r\n    # Log model\r\n    mlflow.sklearn.log_model(model, \"model\")\r\n    \r\n    # Log plot\r\n    plt.savefig('plot.png')\r\n    mlflow.log_artifact('plot.png')\n"})}),"\n",(0,i.jsx)(n.h2,{id:"mlflow-integration",children:"MLflow Integration"}),"\n",(0,i.jsx)(n.h3,{id:"basic-integration",children:"Basic Integration"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import mlflow\r\n\r\n# Set tracking server\r\nmlflow.set_tracking_uri("http://localhost:5000")\r\n\r\n# Set experiment\r\nmlflow.set_experiment("my_experiment")\r\n\r\n# Start run\r\nwith mlflow.start_run():\r\n    # Your code here\r\n    pass\n'})}),"\n",(0,i.jsx)(n.h3,{id:"advanced-integration",children:"Advanced Integration"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import mlflow\r\nfrom mlflow.tracking import MlflowClient\r\n\r\n# Initialize client\r\nclient = MlflowClient("http://localhost:5000")\r\n\r\n# Get or create experiment\r\ntry:\r\n    exp_id = client.get_experiment_by_name("my_exp").experiment_id\r\nexcept:\r\n    exp_id = client.create_experiment("my_exp")\r\n\r\n# Create run\r\nwith mlflow.start_run(experiment_id=exp_id, run_name="my_run"):\r\n    # Log complex data\r\n    mlflow.log_dict({"config": config}, "config.json")\r\n    mlflow.log_text("training complete", "status.txt")\r\n    mlflow.log_model(model, "model")\n'})}),"\n",(0,i.jsx)(n.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,i.jsx)(n.p,{children:"The template includes standard ML/data science libraries:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"scikit-learn>=1.0.0    # ML algorithms\r\npandas>=1.3.0          # Data manipulation\r\nnumpy>=1.21.0          # Numerical computing\r\nmatplotlib>=3.4.0      # Plotting\r\npyyaml>=5.4.0          # Configuration\r\nmlflow>=1.28.0         # Experiment tracking\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Add more in ",(0,i.jsx)(n.code,{children:"requirements.txt"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"pip install new-package\r\npip freeze > requirements.txt\n"})}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsxs)(n.p,{children:["\u2705 ",(0,i.jsx)(n.strong,{children:"Do:"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Use configuration files for all hyperparameters"}),"\n",(0,i.jsx)(n.li,{children:"Log all important parameters and metrics"}),"\n",(0,i.jsx)(n.li,{children:"Use meaningful experiment names"}),"\n",(0,i.jsx)(n.li,{children:"Commit code before running experiments"}),"\n",(0,i.jsx)(n.li,{children:"Document your approach"}),"\n",(0,i.jsx)(n.li,{children:"Use version control properly"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u274c ",(0,i.jsx)(n.strong,{children:"Don't:"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Hard-code parameters"}),"\n",(0,i.jsx)(n.li,{children:"Skip logging important metrics"}),"\n",(0,i.jsx)(n.li,{children:"Mix unrelated experiments"}),"\n",(0,i.jsx)(n.li,{children:"Leave uncommitted changes"}),"\n",(0,i.jsx)(n.li,{children:"Use non-deterministic random seeds"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"extending-the-template",children:"Extending the Template"}),"\n",(0,i.jsx)(n.h3,{id:"add-custom-preprocessing",children:"Add Custom Preprocessing"}),"\n",(0,i.jsxs)(n.p,{children:["Create ",(0,i.jsx)(n.code,{children:"src/preprocessing.py"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'def preprocess_data(X, y):\r\n    """Custom preprocessing pipeline."""\r\n    # Your preprocessing logic\r\n    return X_processed, y_processed\n'})}),"\n",(0,i.jsx)(n.p,{children:"Use in training:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from src.preprocessing import preprocess_data\r\n\r\nX, y = preprocess_data(X, y)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"add-evaluation-module",children:"Add Evaluation Module"}),"\n",(0,i.jsxs)(n.p,{children:["Create ",(0,i.jsx)(n.code,{children:"src/evaluation.py"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'def evaluate_model(model, X_test, y_test):\r\n    """Comprehensive evaluation."""\r\n    predictions = model.predict(X_test)\r\n    return {\r\n        "accuracy": accuracy_score(y_test, predictions),\r\n        "precision": precision_score(y_test, predictions),\r\n        "recall": recall_score(y_test, predictions),\r\n    }\n'})}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(n.h3,{id:"cant-connect-to-mlflow",children:"Can't Connect to MLflow"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Check if MLflow is running\r\ncurl http://localhost:5000\r\n\r\n# Check environment variable\r\necho $MLFLOW_TRACKING_URI\r\n\r\n# Set explicitly in code\r\nmlflow.set_tracking_uri("http://localhost:5000")\n'})}),"\n",(0,i.jsx)(n.h3,{id:"dependencies-not-found",children:"Dependencies Not Found"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Reinstall dependencies\r\npip install -r requirements.txt\r\n\r\n# Check installation\r\npip show mlflow\n"})}),"\n",(0,i.jsx)(n.h3,{id:"permission-errors",children:"Permission Errors"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Use virtual environment\r\nsource .venv/bin/activate\r\n\r\n# Check permissions\r\nls -la src/\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.p,{children:["See ",(0,i.jsx)(n.a,{href:"/docs/researcher-guide/overview",children:"Researcher Guide"})," for detailed training examples."]})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:function(e,n,r){r.d(n,{R:function(){return l},x:function(){return a}});var t=r(6540);const i={},s=t.createContext(i);function l(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);