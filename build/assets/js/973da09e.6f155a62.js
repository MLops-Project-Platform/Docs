"use strict";(self.webpackChunkmlops_documentation=self.webpackChunkmlops_documentation||[]).push([[599],{8034:function(e,n,r){r.r(n),r.d(n,{assets:function(){return c},contentTitle:function(){return o},default:function(){return h},frontMatter:function(){return s},metadata:function(){return i},toc:function(){return a}});var i=JSON.parse('{"id":"tools/mlflow","title":"MLflow","description":"What is MLflow?","source":"@site/docs/tools/mlflow.md","sourceDirName":"tools","slug":"/tools/mlflow","permalink":"/docs/tools/mlflow","draft":false,"unlisted":false,"editUrl":"https://github.com/MLops-Project-Platform/documentation/tree/main/docs/tools/mlflow.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Tools Overview","permalink":"/docs/tools/overview"},"next":{"title":"Docker","permalink":"/docs/tools/docker"}}'),l=r(4848),t=r(8453);const s={sidebar_position:2},o="MLflow",c={},a=[{value:"What is MLflow?",id:"what-is-mlflow",level:2},{value:"Key Features",id:"key-features",level:2},{value:"1. Experiment Tracking",id:"1-experiment-tracking",level:3},{value:"2. Model Registry",id:"2-model-registry",level:3},{value:"3. Experiment Comparison",id:"3-experiment-comparison",level:3},{value:"Architecture",id:"architecture",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Environment Variables",id:"environment-variables",level:3},{value:"S3 Configuration (MinIO)",id:"s3-configuration-minio",level:3},{value:"Common Tasks",id:"common-tasks",level:2},{value:"Set Experiment",id:"set-experiment",level:3},{value:"Query Experiments",id:"query-experiments",level:3},{value:"Search Runs",id:"search-runs",level:3},{value:"API Reference",id:"api-reference",level:2},{value:"UI Navigation",id:"ui-navigation",level:2},{value:"Experiments Tab",id:"experiments-tab",level:3},{value:"Models Tab",id:"models-tab",level:3},{value:"Runs Tab",id:"runs-tab",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Can&#39;t connect to MLflow",id:"cant-connect-to-mlflow",level:3},{value:"S3/MinIO not working",id:"s3minio-not-working",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"mlflow",children:"MLflow"})}),"\n",(0,l.jsx)(n.h2,{id:"what-is-mlflow",children:"What is MLflow?"}),"\n",(0,l.jsx)(n.p,{children:"MLflow is an open-source platform for managing the complete machine learning lifecycle including experimentation, reproducibility, and deployment."}),"\n",(0,l.jsx)(n.h2,{id:"key-features",children:"Key Features"}),"\n",(0,l.jsx)(n.h3,{id:"1-experiment-tracking",children:"1. Experiment Tracking"}),"\n",(0,l.jsx)(n.p,{children:"Log and compare machine learning experiments with metrics, parameters, and artifacts."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'import mlflow\r\n\r\n# Start experiment tracking\r\nwith mlflow.start_run():\r\n    # Log parameters\r\n    mlflow.log_param("learning_rate", 0.001)\r\n    mlflow.log_param("epochs", 100)\r\n    \r\n    # Log metrics\r\n    mlflow.log_metric("accuracy", 0.95)\r\n    mlflow.log_metric("loss", 0.05)\r\n    \r\n    # Log artifacts (files)\r\n    mlflow.log_artifact("model.pkl")\n'})}),"\n",(0,l.jsx)(n.h3,{id:"2-model-registry",children:"2. Model Registry"}),"\n",(0,l.jsx)(n.p,{children:"Version and manage models with clear staging (Development, Staging, Production)."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'# Register a model\r\nmlflow.sklearn.log_model(\r\n    model, \r\n    artifact_path="models",\r\n    registered_model_name="my_model"\r\n)\r\n\r\n# Promote to production\r\nfrom mlflow.tracking import MlflowClient\r\nclient = MlflowClient()\r\nclient.transition_model_version_stage(\r\n    name="my_model",\r\n    version=2,\r\n    stage="Production"\r\n)\n'})}),"\n",(0,l.jsx)(n.h3,{id:"3-experiment-comparison",children:"3. Experiment Comparison"}),"\n",(0,l.jsx)(n.p,{children:"Visually compare multiple runs in the web UI."}),"\n",(0,l.jsx)(n.h2,{id:"architecture",children:"Architecture"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"MLflow Server\r\n\u251c\u2500\u2500 Tracking Server (REST API)\r\n\u251c\u2500\u2500 Model Registry (Model versioning)\r\n\u251c\u2500\u2500 UI (Web interface)\r\n\u2514\u2500\u2500 Backend Store (PostgreSQL)\n"})}),"\n",(0,l.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,l.jsx)(n.h3,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"MLFLOW_TRACKING_URI=http://localhost:5000\r\nMLFLOW_BACKEND_STORE_URI=postgresql://mlflow:mlflow@postgres:5432/mlflow\r\nMLFLOW_DEFAULT_ARTIFACT_ROOT=s3://mlflow-artifacts\n"})}),"\n",(0,l.jsx)(n.h3,{id:"s3-configuration-minio",children:"S3 Configuration (MinIO)"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"import os\r\n\r\nos.environ['MLFLOW_S3_ENDPOINT_URL'] = 'http://minio:9000'\r\nos.environ['AWS_ACCESS_KEY_ID'] = 'minioadmin'\r\nos.environ['AWS_SECRET_ACCESS_KEY'] = 'minioadmin123'\n"})}),"\n",(0,l.jsx)(n.h2,{id:"common-tasks",children:"Common Tasks"}),"\n",(0,l.jsx)(n.h3,{id:"set-experiment",children:"Set Experiment"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'mlflow.set_experiment("my_experiment")\r\n\r\nwith mlflow.start_run():\r\n    # Your training code here\r\n    pass\n'})}),"\n",(0,l.jsx)(n.h3,{id:"query-experiments",children:"Query Experiments"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'from mlflow.tracking import MlflowClient\r\n\r\nclient = MlflowClient()\r\n\r\n# Get all experiments\r\nexperiments = client.list_experiments()\r\n\r\n# Get experiment by name\r\nexp = client.get_experiment_by_name("my_experiment")\r\nprint(exp.experiment_id)\n'})}),"\n",(0,l.jsx)(n.h3,{id:"search-runs",children:"Search Runs"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'# Find best run by metric\r\nbest_run = client.search_runs(\r\n    experiment_ids=[exp_id],\r\n    order_by=["metrics.accuracy DESC"]\r\n)[0]\r\n\r\nprint(f"Best accuracy: {best_run.data.metrics[\'accuracy\']}")\n'})}),"\n",(0,l.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Function"}),(0,l.jsx)(n.th,{children:"Purpose"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"mlflow.set_experiment()"})}),(0,l.jsx)(n.td,{children:"Set active experiment"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"mlflow.start_run()"})}),(0,l.jsx)(n.td,{children:"Start a new run"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"mlflow.end_run()"})}),(0,l.jsx)(n.td,{children:"End current run"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"mlflow.log_param()"})}),(0,l.jsx)(n.td,{children:"Log parameter"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"mlflow.log_metric()"})}),(0,l.jsx)(n.td,{children:"Log metric"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"mlflow.log_artifact()"})}),(0,l.jsx)(n.td,{children:"Log file artifact"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"mlflow.log_model()"})}),(0,l.jsx)(n.td,{children:"Register and log model"})]})]})]}),"\n",(0,l.jsx)(n.h2,{id:"ui-navigation",children:"UI Navigation"}),"\n",(0,l.jsx)(n.h3,{id:"experiments-tab",children:"Experiments Tab"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"View all experiments"}),"\n",(0,l.jsx)(n.li,{children:"Compare runs side-by-side"}),"\n",(0,l.jsx)(n.li,{children:"Filter by metric ranges"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"models-tab",children:"Models Tab"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Browse registered models"}),"\n",(0,l.jsx)(n.li,{children:"View model versions"}),"\n",(0,l.jsx)(n.li,{children:"Check staged transitions"}),"\n",(0,l.jsx)(n.li,{children:"Deploy models"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"runs-tab",children:"Runs Tab"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"View run details"}),"\n",(0,l.jsx)(n.li,{children:"Download artifacts"}),"\n",(0,l.jsx)(n.li,{children:"Compare parameter sets"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,l.jsxs)(n.p,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Do:"})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Log hyperparameters explicitly"}),"\n",(0,l.jsx)(n.li,{children:"Use meaningful experiment names"}),"\n",(0,l.jsx)(n.li,{children:"Commit code before logging runs"}),"\n",(0,l.jsx)(n.li,{children:"Tag important runs"}),"\n",(0,l.jsx)(n.li,{children:"Version your models"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["\u274c ",(0,l.jsx)(n.strong,{children:"Don't:"})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Log too frequently (use batching)"}),"\n",(0,l.jsx)(n.li,{children:"Store raw data as artifacts"}),"\n",(0,l.jsx)(n.li,{children:"Ignore run status"}),"\n",(0,l.jsx)(n.li,{children:"Mix unrelated runs in one experiment"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,l.jsx)(n.h3,{id:"cant-connect-to-mlflow",children:"Can't connect to MLflow"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Check if server is running\r\ncurl http://localhost:5000\r\n\r\n# Check logs\r\ndocker compose logs mlflow\n"})}),"\n",(0,l.jsx)(n.h3,{id:"s3minio-not-working",children:"S3/MinIO not working"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Test MinIO connection\r\ncurl -u minioadmin:minioadmin123 http://localhost:9000\r\n\r\n# Check environment variables\r\nenv | grep AWS\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsxs)(n.p,{children:["See ",(0,l.jsx)(n.a,{href:"/docs/researcher-guide/overview",children:"Researcher Guide"})," for practical examples."]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},8453:function(e,n,r){r.d(n,{R:function(){return s},x:function(){return o}});var i=r(6540);const l={},t=i.createContext(l);function s(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:s(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);