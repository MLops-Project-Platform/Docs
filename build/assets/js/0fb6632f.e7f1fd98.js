"use strict";(self.webpackChunkmlops_documentation=self.webpackChunkmlops_documentation||[]).push([[592],{6170:function(e,n,r){r.r(n),r.d(n,{assets:function(){return l},contentTitle:function(){return a},default:function(){return h},frontMatter:function(){return i},metadata:function(){return t},toc:function(){return o}});var t=JSON.parse('{"id":"tools/memcached","title":"Memcached","description":"Overview","source":"@site/docs/tools/memcached.md","sourceDirName":"tools","slug":"/tools/memcached","permalink":"/docs/tools/memcached","draft":false,"unlisted":false,"editUrl":"https://github.com/MLops-Project-Platform/documentation/tree/main/docs/tools/memcached.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Redis","permalink":"/docs/tools/redis"},"next":{"title":"InfluxDB","permalink":"/docs/tools/influxdb"}}'),c=r(4848),s=r(8453);const i={sidebar_position:2},a="Memcached",l={},o=[{value:"Overview",id:"overview",level:2},{value:"Key Features",id:"key-features",level:2},{value:"Use Cases in MLOps",id:"use-cases-in-mlops",level:2},{value:"Caching Model Predictions",id:"caching-model-predictions",level:3},{value:"Installation",id:"installation",level:2},{value:"Docker",id:"docker",level:3},{value:"Docker Compose with Multiple Instances",id:"docker-compose-with-multiple-instances",level:3},{value:"Basic Operations",id:"basic-operations",level:2},{value:"Python Client",id:"python-client",level:3},{value:"Distributed Caching",id:"distributed-caching",level:2},{value:"Consistent Hashing",id:"consistent-hashing",level:3},{value:"Cache-Aside Pattern",id:"cache-aside-pattern",level:3},{value:"Performance Tuning",id:"performance-tuning",level:2},{value:"Connection Pooling",id:"connection-pooling",level:3},{value:"Batch Operations",id:"batch-operations",level:3},{value:"Monitoring",id:"monitoring",level:2},{value:"Health Check",id:"health-check",level:3},{value:"Statistics",id:"statistics",level:3},{value:"Python Monitoring",id:"python-monitoring",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Memcached vs Redis",id:"memcached-vs-redis",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Further Reading",id:"further-reading",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.header,{children:(0,c.jsx)(n.h1,{id:"memcached",children:"Memcached"})}),"\n",(0,c.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,c.jsx)(n.p,{children:"Memcached is a simple, high-performance, distributed memory caching system. It's lightweight and ideal for reducing database load in MLOps platforms."}),"\n",(0,c.jsx)(n.h2,{id:"key-features",children:"Key Features"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Simple Protocol"})," - Easy to implement and debug"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Distributed"})," - Works across multiple servers"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"LRU Eviction"})," - Automatic cleanup of old data"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"No Persistence"})," - Cache only (data loss on restart)"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Ultra-fast"})," - Microsecond latency operations"]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"use-cases-in-mlops",children:"Use Cases in MLOps"}),"\n",(0,c.jsx)(n.h3,{id:"caching-model-predictions",children:"Caching Model Predictions"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:"import memcache\r\n\r\nmc = memcache.Client(['127.0.0.1:11211'])\r\n\r\n# Cache prediction result\r\nprediction = {\r\n    'model_id': 'model_1',\r\n    'input_hash': 'hash_abc123',\r\n    'prediction': 0.95,\r\n    'confidence': 0.99\r\n}\r\n\r\n# Cache for 1 hour (3600 seconds)\r\nmc.set(f'pred:hash_abc123', prediction, 3600)\r\n\r\n# Retrieve from cache\r\ncached_pred = mc.get(f'pred:hash_abc123')\r\nif cached_pred:\r\n    return cached_pred\n"})}),"\n",(0,c.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,c.jsx)(n.h3,{id:"docker",children:"Docker"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-yaml",children:"version: '3.8'\r\nservices:\r\n  memcached:\r\n    image: memcached:1.6-alpine\r\n    ports:\r\n      - \"11211:11211\"\r\n    command: memcached -m 256 -c 1024\r\n    # -m 256: 256MB memory\r\n    # -c 1024: max 1024 concurrent connections\n"})}),"\n",(0,c.jsx)(n.h3,{id:"docker-compose-with-multiple-instances",children:"Docker Compose with Multiple Instances"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-yaml",children:'version: \'3.8\'\r\nservices:\r\n  memcached1:\r\n    image: memcached:1.6-alpine\r\n    ports:\r\n      - "11211:11211"\r\n    command: memcached -m 512\r\n\r\n  memcached2:\r\n    image: memcached:1.6-alpine\r\n    ports:\r\n      - "11212:11211"\r\n    command: memcached -m 512\r\n\r\n  memcached3:\r\n    image: memcached:1.6-alpine\r\n    ports:\r\n      - "11213:11211"\r\n    command: memcached -m 512\n'})}),"\n",(0,c.jsx)(n.h2,{id:"basic-operations",children:"Basic Operations"}),"\n",(0,c.jsx)(n.h3,{id:"python-client",children:"Python Client"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:"import memcache\r\n\r\n# Connect to single server\r\nmc = memcache.Client(['127.0.0.1:11211'])\r\n\r\n# Set value (expires in 3600 seconds)\r\nmc.set('key', 'value', 3600)\r\n\r\n# Get value\r\nvalue = mc.get('key')\r\n\r\n# Delete\r\nmc.delete('key')\r\n\r\n# Increment (for counters)\r\nmc.incr('request_count')\r\n\r\n# Decrement\r\nmc.decr('remaining_quota')\r\n\r\n# Get multiple values\r\nvalues = mc.get_multi(['key1', 'key2', 'key3'])\r\n\r\n# Set multiple values\r\nmc.set_multi({\r\n    'key1': 'value1',\r\n    'key2': 'value2',\r\n    'key3': 'value3'\r\n}, time=3600)\r\n\r\n# Append to existing key\r\nmc.append('log', '\\nnew entry')\r\n\r\n# Get and delete\r\nvalue = mc.gets('key')\r\nif value:\r\n    mc.delete('key')\n"})}),"\n",(0,c.jsx)(n.h2,{id:"distributed-caching",children:"Distributed Caching"}),"\n",(0,c.jsx)(n.h3,{id:"consistent-hashing",children:"Consistent Hashing"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:"import memcache\r\n\r\n# Multiple memcached servers (consistent hashing)\r\nmc = memcache.Client([\r\n    '127.0.0.1:11211',\r\n    '127.0.0.1:11212',\r\n    '127.0.0.1:11213'\r\n])\r\n\r\n# Data automatically distributed across servers\r\n# Same key always goes to same server (consistent hashing)\r\nmc.set('user_session_123', {'user_id': 123}, 3600)\r\n\r\n# Even if one server fails, others keep working\r\n# Remaining data stays on its server\n"})}),"\n",(0,c.jsx)(n.h3,{id:"cache-aside-pattern",children:"Cache-Aside Pattern"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:"def get_model_config(model_id):\r\n    # Try cache first\r\n    cache_key = f'model_config:{model_id}'\r\n    cached = mc.get(cache_key)\r\n    \r\n    if cached:\r\n        return cached\r\n    \r\n    # Cache miss - fetch from database\r\n    config = db.get_model_config(model_id)\r\n    \r\n    # Store in cache\r\n    mc.set(cache_key, config, 3600)\r\n    \r\n    return config\r\n\r\n# Usage\r\nconfig = get_model_config('bert_v1')\n"})}),"\n",(0,c.jsx)(n.h2,{id:"performance-tuning",children:"Performance Tuning"}),"\n",(0,c.jsx)(n.h3,{id:"connection-pooling",children:"Connection Pooling"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:"import memcache\r\n\r\n# Reuse connection pool\r\nclass CacheManager:\r\n    _instance = None\r\n    _client = None\r\n    \r\n    def __new__(cls):\r\n        if cls._instance is None:\r\n            cls._instance = super().__new__(cls)\r\n        return cls._instance\r\n    \r\n    @property\r\n    def client(self):\r\n        if self._client is None:\r\n            self._client = memcache.Client(\r\n                ['127.0.0.1:11211'],\r\n                max_pool_size=10\r\n            )\r\n        return self._client\r\n\r\n# Usage\r\ncache = CacheManager()\r\ncache.client.set('key', 'value')\n"})}),"\n",(0,c.jsx)(n.h3,{id:"batch-operations",children:"Batch Operations"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:"# Use get_multi and set_multi for better performance\r\nkeys = [f'key_{i}' for i in range(1000)]\r\n\r\n# Batch get\r\nvalues = mc.get_multi(keys)\r\n\r\n# Process values\r\n# ...\r\n\r\n# Batch set\r\ndata = {f'key_{i}': f'value_{i}' for i in range(1000)}\r\nmc.set_multi(data, time=3600)\n"})}),"\n",(0,c.jsx)(n.h2,{id:"monitoring",children:"Monitoring"}),"\n",(0,c.jsx)(n.h3,{id:"health-check",children:"Health Check"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:"import memcache\r\n\r\ndef check_memcached_health():\r\n    try:\r\n        mc = memcache.Client(['127.0.0.1:11211'], timeout=2)\r\n        mc.set('health_check', 'ok', 10)\r\n        result = mc.get('health_check')\r\n        mc.delete('health_check')\r\n        return result == b'ok'\r\n    except Exception as e:\r\n        print(f\"Memcached health check failed: {e}\")\r\n        return False\r\n\r\n# Periodic health check\r\nimport schedule\r\nschedule.every(30).seconds.do(check_memcached_health)\n"})}),"\n",(0,c.jsx)(n.h3,{id:"statistics",children:"Statistics"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"# Connect to memcached and get stats\r\ntelnet localhost 11211\r\n\r\n# Type these commands\r\nstats\r\nstats slabs\r\nstats items\r\nquit\r\n\r\n# Or use memcached-tool (included with memcached)\r\nmemcached-tool localhost:11211 dump\n"})}),"\n",(0,c.jsx)(n.h3,{id:"python-monitoring",children:"Python Monitoring"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:"import memcache\r\nimport socket\r\n\r\ndef get_memcached_stats(host, port):\r\n    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\r\n    s.connect((host, port))\r\n    s.sendall(b'stats\\r\\n')\r\n    \r\n    stats = {}\r\n    while True:\r\n        data = s.recv(1024)\r\n        if not data:\r\n            break\r\n        \r\n        for line in data.decode().split('\\n'):\r\n            if line.startswith('STAT'):\r\n                parts = line.split()\r\n                stats[parts[1]] = parts[2]\r\n    \r\n    s.close()\r\n    return stats\r\n\r\nstats = get_memcached_stats('localhost', 11211)\r\nprint(f\"Current bytes: {stats.get('bytes')}\")\r\nprint(f\"Items: {stats.get('curr_items')}\")\n"})}),"\n",(0,c.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Use appropriate TTL"})," - Don't cache everything forever"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Implement fallback"})," - Handle cache misses gracefully"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Monitor hit rate"})," - Track cache effectiveness"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Use consistent hashing"})," - For distributed caching"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Batch operations"})," - Reduce network overhead"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Clear cache on updates"})," - Keep consistency"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Plan capacity"})," - Avoid memory exhaustion"]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"memcached-vs-redis",children:"Memcached vs Redis"}),"\n",(0,c.jsxs)(n.table,{children:[(0,c.jsx)(n.thead,{children:(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.th,{children:"Feature"}),(0,c.jsx)(n.th,{children:"Memcached"}),(0,c.jsx)(n.th,{children:"Redis"})]})}),(0,c.jsxs)(n.tbody,{children:[(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"Data Types"}),(0,c.jsx)(n.td,{children:"Strings only"}),(0,c.jsx)(n.td,{children:"Multiple types"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"Persistence"}),(0,c.jsx)(n.td,{children:"None"}),(0,c.jsx)(n.td,{children:"RDB + AOF"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"Replication"}),(0,c.jsx)(n.td,{children:"No"}),(0,c.jsx)(n.td,{children:"Master-slave"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"Clustering"}),(0,c.jsx)(n.td,{children:"Consistent hashing"}),(0,c.jsx)(n.td,{children:"Cluster mode"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"Use Case"}),(0,c.jsx)(n.td,{children:"Simple caching"}),(0,c.jsx)(n.td,{children:"Complex data"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"Speed"}),(0,c.jsx)(n.td,{children:"Ultra-fast"}),(0,c.jsx)(n.td,{children:"Very fast"})]})]})]}),"\n",(0,c.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:'# Check if memcached is running\r\nnetstat -an | grep 11211\r\n\r\n# Verify connectivity\r\necho "stats" | nc localhost 11211\r\n\r\n# Monitor connections\r\nwatch \'echo stats | nc localhost 11211 | grep curr_conn\'\r\n\r\n# Check memory usage\r\necho "stats" | nc localhost 11211 | grep bytes\r\n\r\n# Restart memcached\r\nsystemctl restart memcached\n'})}),"\n",(0,c.jsx)(n.h2,{id:"further-reading",children:"Further Reading"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.a,{href:"https://memcached.org/about",children:"Memcached Documentation"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.a,{href:"https://github.com/pinterest/pymemcache",children:"Python Memcache Client"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.a,{href:"https://github.com/memcached/memcached/wiki/Commands",children:"Memcached Command Reference"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(d,{...e})}):d(e)}},8453:function(e,n,r){r.d(n,{R:function(){return i},x:function(){return a}});var t=r(6540);const c={},s=t.createContext(c);function i(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:i(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);