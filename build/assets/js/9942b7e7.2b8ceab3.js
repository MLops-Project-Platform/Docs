"use strict";(self.webpackChunkmlops_documentation=self.webpackChunkmlops_documentation||[]).push([[2890],{8360:function(e,n,l){l.r(n),l.d(n,{assets:function(){return a},contentTitle:function(){return i},default:function(){return p},frontMatter:function(){return t},metadata:function(){return r},toc:function(){return c}});var r=JSON.parse('{"id":"tools/kubernetes","title":"Kubernetes","description":"What is Kubernetes?","source":"@site/docs/tools/kubernetes.md","sourceDirName":"tools","slug":"/tools/kubernetes","permalink":"/docs/tools/kubernetes","draft":false,"unlisted":false,"editUrl":"https://github.com/MLops-Project-Platform/documentation/tree/main/docs/tools/kubernetes.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"Docker","permalink":"/docs/tools/docker"},"next":{"title":"Helm Charts & Package Management","permalink":"/docs/tools/helm"}}'),s=l(4848),o=l(8453);const t={sidebar_position:6},i="Kubernetes",a={},c=[{value:"What is Kubernetes?",id:"what-is-kubernetes",level:2},{value:"Role in MLOps Platform",id:"role-in-mlops-platform",level:2},{value:"Core Concepts",id:"core-concepts",level:2},{value:"Pod",id:"pod",level:3},{value:"Deployment",id:"deployment",level:3},{value:"Service",id:"service",level:3},{value:"StatefulSet",id:"statefulset",level:3},{value:"ConfigMap",id:"configmap",level:3},{value:"Secret",id:"secret",level:3},{value:"MLOps on Kubernetes",id:"mlops-on-kubernetes",level:2},{value:"Namespace Organization",id:"namespace-organization",level:3},{value:"Core Services",id:"core-services",level:3},{value:"Training Jobs",id:"training-jobs",level:3},{value:"Helm Charts",id:"helm-charts",level:2},{value:"Deployment Example",id:"deployment-example",level:2},{value:"Create Namespace",id:"create-namespace",level:3},{value:"Deploy MLflow",id:"deploy-mlflow",level:3},{value:"Expose Service",id:"expose-service",level:3},{value:"Common kubectl Commands",id:"common-kubectl-commands",level:2},{value:"Monitoring and Logging",id:"monitoring-and-logging",level:2},{value:"Check Pod Status",id:"check-pod-status",level:3},{value:"View Pod Logs",id:"view-pod-logs",level:3},{value:"Resource Usage",id:"resource-usage",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Pod Won&#39;t Start",id:"pod-wont-start",level:3},{value:"Service Not Accessible",id:"service-not-accessible",level:3},{value:"Persistent Volume Issues",id:"persistent-volume-issues",level:3},{value:"Security Best Practices",id:"security-best-practices",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"kubernetes",children:"Kubernetes"})}),"\n",(0,s.jsx)(n.h2,{id:"what-is-kubernetes",children:"What is Kubernetes?"}),"\n",(0,s.jsx)(n.p,{children:"Kubernetes (K8s) is an open-source container orchestration platform for automating deployment, scaling, and management of containerized applications."}),"\n",(0,s.jsx)(n.h2,{id:"role-in-mlops-platform",children:"Role in MLOps Platform"}),"\n",(0,s.jsx)(n.p,{children:"Kubernetes provides:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Production Deployment"})," - Scale MLOps platform across multiple nodes"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"High Availability"})," - Automatic failover and recovery"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Resource Management"})," - Efficient CPU/memory allocation"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Auto-scaling"})," - Scale based on demand"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Network Management"})," - Service discovery and load balancing"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"core-concepts",children:"Core Concepts"}),"\n",(0,s.jsx)(n.h3,{id:"pod",children:"Pod"}),"\n",(0,s.jsx)(n.p,{children:"Smallest deployable unit containing one or more containers."}),"\n",(0,s.jsx)(n.h3,{id:"deployment",children:"Deployment"}),"\n",(0,s.jsx)(n.p,{children:"Manages replicas of pods, handles rolling updates."}),"\n",(0,s.jsx)(n.h3,{id:"service",children:"Service"}),"\n",(0,s.jsx)(n.p,{children:"Exposes pods as network endpoints, enables load balancing."}),"\n",(0,s.jsx)(n.h3,{id:"statefulset",children:"StatefulSet"}),"\n",(0,s.jsx)(n.p,{children:"For stateful apps like databases that need stable identities."}),"\n",(0,s.jsx)(n.h3,{id:"configmap",children:"ConfigMap"}),"\n",(0,s.jsx)(n.p,{children:"Store non-sensitive configuration data."}),"\n",(0,s.jsx)(n.h3,{id:"secret",children:"Secret"}),"\n",(0,s.jsx)(n.p,{children:"Store sensitive data (passwords, tokens)."}),"\n",(0,s.jsx)(n.h2,{id:"mlops-on-kubernetes",children:"MLOps on Kubernetes"}),"\n",(0,s.jsx)(n.h3,{id:"namespace-organization",children:"Namespace Organization"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"# Separate namespaces for different concerns\r\n- mlops-platform (core services)\r\n- mlops-training (training jobs)\r\n- mlops-monitoring (observability)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"core-services",children:"Core Services"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"mlops-platform/\r\n\u251c\u2500\u2500 mlflow (Deployment)\r\n\u251c\u2500\u2500 postgres (StatefulSet)\r\n\u251c\u2500\u2500 minio (StatefulSet)\r\n\u2514\u2500\u2500 nginx (Deployment)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"training-jobs",children:"Training Jobs"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"mlops-training/\r\n\u251c\u2500\u2500 Training Job 1 (Pod)\r\n\u251c\u2500\u2500 Training Job 2 (Pod)\r\n\u2514\u2500\u2500 Training Job N (Pod)\n"})}),"\n",(0,s.jsx)(n.h2,{id:"helm-charts",children:"Helm Charts"}),"\n",(0,s.jsx)(n.p,{children:"We provide Helm charts for simplified Kubernetes deployment:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Install MLOps platform\r\nhelm install mlops ./mlops-helm-charts \\\r\n  --namespace mlops-platform \\\r\n  --create-namespace\n"})}),"\n",(0,s.jsxs)(n.p,{children:["See ",(0,s.jsx)(n.a,{href:"/docs/repositories/mlops-helm-charts",children:"Helm Charts Repository"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"deployment-example",children:"Deployment Example"}),"\n",(0,s.jsx)(n.h3,{id:"create-namespace",children:"Create Namespace"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"# namespace.yaml\r\napiVersion: v1\r\nkind: Namespace\r\nmetadata:\r\n  name: mlops-platform\n"})}),"\n",(0,s.jsx)(n.h3,{id:"deploy-mlflow",children:"Deploy MLflow"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'# mlflow-deployment.yaml\r\napiVersion: apps/v1\r\nkind: Deployment\r\nmetadata:\r\n  name: mlflow\r\n  namespace: mlops-platform\r\nspec:\r\n  replicas: 2\r\n  selector:\r\n    matchLabels:\r\n      app: mlflow\r\n  template:\r\n    metadata:\r\n      labels:\r\n        app: mlflow\r\n    spec:\r\n      containers:\r\n      - name: mlflow\r\n        image: ghcr.io/mlflow/mlflow:latest\r\n        ports:\r\n        - containerPort: 5000\r\n        env:\r\n        - name: MLFLOW_BACKEND_STORE_URI\r\n          value: postgresql://mlflow:password@postgres:5432/mlflow\r\n        - name: MLFLOW_DEFAULT_ARTIFACT_ROOT\r\n          value: s3://mlflow-artifacts\r\n        - name: AWS_ACCESS_KEY_ID\r\n          valueFrom:\r\n            secretKeyRef:\r\n              name: minio-credentials\r\n              key: access-key\r\n        - name: AWS_SECRET_ACCESS_KEY\r\n          valueFrom:\r\n            secretKeyRef:\r\n              name: minio-credentials\r\n              key: secret-key\r\n        resources:\r\n          requests:\r\n            memory: "512Mi"\r\n            cpu: "250m"\r\n          limits:\r\n            memory: "1Gi"\r\n            cpu: "500m"\n'})}),"\n",(0,s.jsx)(n.h3,{id:"expose-service",children:"Expose Service"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"# mlflow-service.yaml\r\napiVersion: v1\r\nkind: Service\r\nmetadata:\r\n  name: mlflow\r\n  namespace: mlops-platform\r\nspec:\r\n  type: LoadBalancer\r\n  ports:\r\n  - port: 80\r\n    targetPort: 5000\r\n    protocol: TCP\r\n  selector:\r\n    app: mlflow\n"})}),"\n",(0,s.jsx)(n.h2,{id:"common-kubectl-commands",children:"Common kubectl Commands"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Cluster Info\r\nkubectl get nodes\r\nkubectl get namespaces\r\nkubectl cluster-info\r\n\r\n# Deployments\r\nkubectl get deployments -n mlops-platform\r\nkubectl describe deployment mlflow -n mlops-platform\r\nkubectl logs -f deployment/mlflow -n mlops-platform\r\n\r\n# Pods\r\nkubectl get pods -n mlops-platform\r\nkubectl exec -it pod/mlflow-xxxxx -n mlops-platform -- bash\r\n\r\n# Services\r\nkubectl get svc -n mlops-platform\r\nkubectl port-forward svc/mlflow 5000:80 -n mlops-platform\r\n\r\n# Scaling\r\nkubectl scale deployment mlflow --replicas=3 -n mlops-platform\r\n\r\n# Updates\r\nkubectl set image deployment/mlflow mlflow=mlflow:2.0 -n mlops-platform\r\nkubectl rollout status deployment/mlflow -n mlops-platform\r\nkubectl rollout undo deployment/mlflow -n mlops-platform\n"})}),"\n",(0,s.jsx)(n.h2,{id:"monitoring-and-logging",children:"Monitoring and Logging"}),"\n",(0,s.jsx)(n.h3,{id:"check-pod-status",children:"Check Pod Status"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kubectl get pods -n mlops-platform -o wide\n"})}),"\n",(0,s.jsx)(n.h3,{id:"view-pod-logs",children:"View Pod Logs"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Current logs\r\nkubectl logs pod/mlflow-xxxxx -n mlops-platform\r\n\r\n# Follow logs\r\nkubectl logs -f pod/mlflow-xxxxx -n mlops-platform\r\n\r\n# Previous logs (after restart)\r\nkubectl logs --previous pod/mlflow-xxxxx -n mlops-platform\n"})}),"\n",(0,s.jsx)(n.h3,{id:"resource-usage",children:"Resource Usage"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kubectl top nodes\r\nkubectl top pods -n mlops-platform\n"})}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(n.h3,{id:"pod-wont-start",children:"Pod Won't Start"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Check events\r\nkubectl describe pod mlflow-xxxxx -n mlops-platform\r\n\r\n# Check logs\r\nkubectl logs pod/mlflow-xxxxx -n mlops-platform\r\n\r\n# Check resource limits\r\nkubectl top pods -n mlops-platform\n"})}),"\n",(0,s.jsx)(n.h3,{id:"service-not-accessible",children:"Service Not Accessible"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Check service\r\nkubectl get svc mlflow -n mlops-platform\r\n\r\n# Check endpoints\r\nkubectl get endpoints mlflow -n mlops-platform\r\n\r\n# Test connectivity\r\nkubectl run -it --rm debug --image=alpine --restart=Never -- \\\r\n  wget -O- http://mlflow:80\n"})}),"\n",(0,s.jsx)(n.h3,{id:"persistent-volume-issues",children:"Persistent Volume Issues"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# List PVCs\r\nkubectl get pvc -n mlops-platform\r\n\r\n# Check PV status\r\nkubectl get pv\r\n\r\n# Describe PVC for errors\r\nkubectl describe pvc postgres-data -n mlops-platform\n"})}),"\n",(0,s.jsx)(n.h2,{id:"security-best-practices",children:"Security Best Practices"}),"\n",(0,s.jsxs)(n.p,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Do:"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Use network policies"}),"\n",(0,s.jsx)(n.li,{children:"Enable RBAC"}),"\n",(0,s.jsx)(n.li,{children:"Use secrets for sensitive data"}),"\n",(0,s.jsx)(n.li,{children:"Set resource limits"}),"\n",(0,s.jsx)(n.li,{children:"Use image pull policies"}),"\n",(0,s.jsx)(n.li,{children:"Regular backups"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["\u274c ",(0,s.jsx)(n.strong,{children:"Don't:"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Store secrets in ConfigMaps"}),"\n",(0,s.jsx)(n.li,{children:"Run containers as root"}),"\n",(0,s.jsx)(n.li,{children:"Use latest image tags"}),"\n",(0,s.jsx)(n.li,{children:"Expose sensitive APIs"}),"\n",(0,s.jsx)(n.li,{children:"Skip resource limits"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.p,{children:["See ",(0,s.jsx)(n.a,{href:"/docs/deployment/kubernetes",children:"Kubernetes Deployment Guide"})," for detailed setup instructions."]})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:function(e,n,l){l.d(n,{R:function(){return t},x:function(){return i}});var r=l(6540);const s={},o=r.createContext(s);function t(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);