"use strict";(self.webpackChunkmlops_documentation=self.webpackChunkmlops_documentation||[]).push([[6774],{8453:function(e,n,r){r.d(n,{R:function(){return l},x:function(){return c}});var o=r(6540);const s={},i=o.createContext(s);function l(e){const n=o.useContext(i);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),o.createElement(i.Provider,{value:n},e.children)}},9026:function(e,n,r){r.r(n),r.d(n,{assets:function(){return d},contentTitle:function(){return c},default:function(){return u},frontMatter:function(){return l},metadata:function(){return o},toc:function(){return a}});var o=JSON.parse('{"id":"deployment/docker","title":"Docker Deployment Guide","description":"Deploy the MLOps Platform documentation with Docusaurus using Docker.","source":"@site/docs/deployment/docker.md","sourceDirName":"deployment","slug":"/deployment/docker","permalink":"/docs/deployment/docker","draft":false,"unlisted":false,"editUrl":"https://github.com/MLops-Project-Platform/documentation/tree/main/docs/deployment/docker.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1}}'),s=r(4848),i=r(8453);const l={sidebar_position:1},c="Docker Deployment Guide",d={},a=[{value:"Overview",id:"overview",level:2},{value:"Docker Image",id:"docker-image",level:2},{value:"Dockerfile",id:"dockerfile",level:3},{value:".dockerignore",id:"dockerignore",level:3},{value:"Building and Running",id:"building-and-running",level:2},{value:"Build Image",id:"build-image",level:3},{value:"Run Container Locally",id:"run-container-locally",level:3},{value:"Container Management",id:"container-management",level:3},{value:"Docker Compose",id:"docker-compose",level:2},{value:"docker-compose.yml",id:"docker-composeyml",level:3},{value:"Run with Docker Compose",id:"run-with-docker-compose",level:3},{value:"Development Workflow",id:"development-workflow",level:2},{value:"Live Development",id:"live-development",level:3},{value:"Deployment",id:"deployment",level:2},{value:"Push to Docker Hub",id:"push-to-docker-hub",level:3},{value:"Push to Container Registry (Azure ACR)",id:"push-to-container-registry-azure-acr",level:3},{value:"Push to Container Registry (AWS ECR)",id:"push-to-container-registry-aws-ecr",level:3},{value:"Advanced Configuration",id:"advanced-configuration",level:2},{value:"Multi-stage Build",id:"multi-stage-build",level:3},{value:"Environment-specific Configuration",id:"environment-specific-configuration",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Build Fails",id:"build-fails",level:3},{value:"Port Already in Use",id:"port-already-in-use",level:3},{value:"Out of Memory",id:"out-of-memory",level:3},{value:"Health Check Failing",id:"health-check-failing",level:3},{value:"Performance Optimization",id:"performance-optimization",level:2},{value:"Image Size",id:"image-size",level:3},{value:"Build Performance",id:"build-performance",level:3},{value:"Security Best Practices",id:"security-best-practices",level:2},{value:"Example: Run as Non-root",id:"example-run-as-non-root",level:3}];function t(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"docker-deployment-guide",children:"Docker Deployment Guide"})}),"\n",(0,s.jsx)(n.p,{children:"Deploy the MLOps Platform documentation with Docusaurus using Docker."}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"This guide uses the official Docusaurus Docker deployment approach to containerize and deploy your documentation."}),"\n",(0,s.jsx)(n.h2,{id:"docker-image",children:"Docker Image"}),"\n",(0,s.jsx)(n.h3,{id:"dockerfile",children:"Dockerfile"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-dockerfile",children:'# Build stage\r\nFROM node:18-alpine AS builder\r\n\r\nWORKDIR /app\r\n\r\n# Copy package files\r\nCOPY package*.json ./\r\n\r\n# Install dependencies\r\nRUN npm ci\r\n\r\n# Copy documentation source\r\nCOPY . .\r\n\r\n# Build static site\r\nRUN npm run build\r\n\r\n# Production stage\r\nFROM node:18-alpine\r\n\r\nWORKDIR /app\r\n\r\n# Copy built artifacts from builder\r\nCOPY --from=builder /app/build ./build\r\n\r\n# Install http-server to serve static files\r\nRUN npm install -g http-server\r\n\r\n# Expose port\r\nEXPOSE 3000\r\n\r\n# Health check\r\nHEALTHCHECK --interval=30s --timeout=10s --start-period=40s --retries=3 \\\r\n    CMD wget --quiet --tries=1 --spider http://localhost:3000/ || exit 1\r\n\r\n# Serve documentation\r\nCMD ["http-server", "build", "-p", "3000", "--cors", "-c-1"]\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Save as: ",(0,s.jsx)(n.code,{children:"Dockerfile"})]}),"\n",(0,s.jsx)(n.h3,{id:"dockerignore",children:".dockerignore"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"node_modules\r\nnpm-debug.log\r\nbuild\r\n.git\r\n.gitignore\r\nREADME.md\r\n.DS_Store\r\n.vscode\r\n.idea\r\n*.swp\r\n*.swo\r\n*~\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Save as: ",(0,s.jsx)(n.code,{children:".dockerignore"})]}),"\n",(0,s.jsx)(n.h2,{id:"building-and-running",children:"Building and Running"}),"\n",(0,s.jsx)(n.h3,{id:"build-image",children:"Build Image"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Navigate to Docs directory\r\ncd e:\\Projects\\MLops-Project-Platform\\Docs\r\n\r\n# Build image\r\ndocker build -t mlops-docs:1.0 .\r\n\r\n# Verify build\r\ndocker image ls | grep mlops-docs\n"})}),"\n",(0,s.jsx)(n.h3,{id:"run-container-locally",children:"Run Container Locally"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Run container\r\ndocker run -d \\\r\n  --name mlops-docs \\\r\n  -p 3000:3000 \\\r\n  mlops-docs:1.0\r\n\r\n# Check status\r\ndocker ps | grep mlops-docs\r\n\r\n# View logs\r\ndocker logs mlops-docs\r\n\r\n# Access documentation\r\n# Open http://localhost:3000 in browser\n"})}),"\n",(0,s.jsx)(n.h3,{id:"container-management",children:"Container Management"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Stop container\r\ndocker stop mlops-docs\r\n\r\n# Start container\r\ndocker start mlops-docs\r\n\r\n# View logs\r\ndocker logs -f mlops-docs\r\n\r\n# Remove container\r\ndocker rm mlops-docs\r\n\r\n# Remove image\r\ndocker rmi mlops-docs:1.0\n"})}),"\n",(0,s.jsx)(n.h2,{id:"docker-compose",children:"Docker Compose"}),"\n",(0,s.jsx)(n.p,{children:"For local development, use docker-compose:"}),"\n",(0,s.jsx)(n.h3,{id:"docker-composeyml",children:"docker-compose.yml"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'version: \'3.8\'\r\n\r\nservices:\r\n  docs:\r\n    build:\r\n      context: .\r\n      dockerfile: Dockerfile\r\n    \r\n    container_name: mlops-docs\r\n    \r\n    ports:\r\n      - "3000:3000"\r\n    \r\n    environment:\r\n      NODE_ENV: production\r\n    \r\n    volumes:\r\n      - ./docs:/app/docs              # Mount docs for live editing\r\n      - ./sidebars.js:/app/sidebars.js\r\n      - ./docusaurus.config.js:/app/docusaurus.config.js\r\n    \r\n    healthcheck:\r\n      test: ["CMD", "wget", "--quiet", "--tries=1", "--spider", "http://localhost:3000/"]\r\n      interval: 30s\r\n      timeout: 10s\r\n      retries: 3\r\n      start_period: 40s\r\n    \r\n    restart: unless-stopped\n'})}),"\n",(0,s.jsx)(n.h3,{id:"run-with-docker-compose",children:"Run with Docker Compose"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Start services\r\ndocker compose up -d\r\n\r\n# View logs\r\ndocker compose logs -f docs\r\n\r\n# Stop services\r\ndocker compose down\r\n\r\n# Remove volumes\r\ndocker compose down -v\n"})}),"\n",(0,s.jsx)(n.h2,{id:"development-workflow",children:"Development Workflow"}),"\n",(0,s.jsx)(n.h3,{id:"live-development",children:"Live Development"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Start with volume mounts (for live reload)\r\ndocker run -d \\\r\n  --name mlops-docs-dev \\\r\n  -p 3000:3000 \\\r\n  -v $(pwd)/docs:/app/docs \\\r\n  -v $(pwd)/sidebars.js:/app/sidebars.js \\\r\n  mlops-docs:1.0\n"})}),"\n",(0,s.jsx)(n.p,{children:"Or use the development Dockerfile:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-dockerfile",children:'# Dockerfile.dev\r\nFROM node:18-alpine\r\n\r\nWORKDIR /app\r\n\r\nCOPY package*.json ./\r\nRUN npm ci\r\n\r\nEXPOSE 3000\r\n\r\nCMD ["npm", "start"]\n'})}),"\n",(0,s.jsx)(n.p,{children:"Build and run:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker build -f Dockerfile.dev -t mlops-docs:dev .\r\n\r\ndocker run -d \\\r\n  --name mlops-docs-dev \\\r\n  -p 3000:3000 \\\r\n  -v $(pwd):/app \\\r\n  mlops-docs:dev\n"})}),"\n",(0,s.jsx)(n.h2,{id:"deployment",children:"Deployment"}),"\n",(0,s.jsx)(n.h3,{id:"push-to-docker-hub",children:"Push to Docker Hub"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Login\r\ndocker login\r\n\r\n# Tag image\r\ndocker tag mlops-docs:1.0 your-username/mlops-docs:1.0\r\ndocker tag mlops-docs:1.0 your-username/mlops-docs:latest\r\n\r\n# Push\r\ndocker push your-username/mlops-docs:1.0\r\ndocker push your-username/mlops-docs:latest\r\n\r\n# Verify\r\ndocker pull your-username/mlops-docs:latest\n"})}),"\n",(0,s.jsx)(n.h3,{id:"push-to-container-registry-azure-acr",children:"Push to Container Registry (Azure ACR)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Login to ACR\r\naz acr login --name myregistry\r\n\r\n# Tag image\r\ndocker tag mlops-docs:1.0 myregistry.azurecr.io/mlops-docs:1.0\r\n\r\n# Push\r\ndocker push myregistry.azurecr.io/mlops-docs:1.0\r\n\r\n# Verify\r\naz acr repository list --name myregistry\n"})}),"\n",(0,s.jsx)(n.h3,{id:"push-to-container-registry-aws-ecr",children:"Push to Container Registry (AWS ECR)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Get login token\r\naws ecr get-login-password --region us-east-1 | \\\r\n  docker login --username AWS --password-stdin 123456789012.dkr.ecr.us-east-1.amazonaws.com\r\n\r\n# Tag image\r\ndocker tag mlops-docs:1.0 123456789012.dkr.ecr.us-east-1.amazonaws.com/mlops-docs:1.0\r\n\r\n# Push\r\ndocker push 123456789012.dkr.ecr.us-east-1.amazonaws.com/mlops-docs:1.0\n"})}),"\n",(0,s.jsx)(n.h2,{id:"advanced-configuration",children:"Advanced Configuration"}),"\n",(0,s.jsx)(n.h3,{id:"multi-stage-build",children:"Multi-stage Build"}),"\n",(0,s.jsx)(n.p,{children:"For optimized images:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-dockerfile",children:'# Build stage\r\nFROM node:18-alpine AS builder\r\n\r\nWORKDIR /app\r\n\r\nCOPY package*.json ./\r\nRUN npm ci\r\n\r\nCOPY . .\r\n\r\n# Build with optimizations\r\nRUN npm run build && \\\r\n    npm prune --production\r\n\r\n# Production stage - smaller base image\r\nFROM node:18-alpine\r\n\r\nWORKDIR /app\r\n\r\n# Copy only necessary files\r\nCOPY --from=builder /app/build ./build\r\nCOPY --from=builder /app/node_modules ./node_modules\r\nCOPY --from=builder /app/package*.json ./\r\n\r\nEXPOSE 3000\r\n\r\nHEALTHCHECK --interval=30s --timeout=10s --start-period=40s --retries=3 \\\r\n    CMD wget --quiet --tries=1 --spider http://localhost:3000/ || exit 1\r\n\r\nCMD ["node", "-e", "require(\'http-server\').createServer({root: \'./build\'}).listen(3000)"]\n'})}),"\n",(0,s.jsx)(n.h3,{id:"environment-specific-configuration",children:"Environment-specific Configuration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'# docker-compose.dev.yml\r\nversion: \'3.8\'\r\nservices:\r\n  docs:\r\n    build:\r\n      context: .\r\n      dockerfile: Dockerfile.dev\r\n    ports:\r\n      - "3000:3000"\r\n    volumes:\r\n      - .:/app\r\n    command: npm start\r\n\r\n# docker-compose.prod.yml\r\nversion: \'3.8\'\r\nservices:\r\n  docs:\r\n    image: mlops-docs:1.0\r\n    ports:\r\n      - "3000:3000"\r\n    restart: always\r\n    healthcheck:\r\n      test: ["CMD", "wget", "--quiet", "--tries=1", "--spider", "http://localhost:3000/"]\r\n      interval: 30s\r\n      timeout: 10s\r\n      retries: 3\n'})}),"\n",(0,s.jsx)(n.p,{children:"Use with:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker compose -f docker-compose.dev.yml up\r\ndocker compose -f docker-compose.prod.yml up -d\n"})}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(n.h3,{id:"build-fails",children:"Build Fails"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Clear cache and rebuild\r\ndocker build --no-cache -t mlops-docs:1.0 .\r\n\r\n# Check Node version\r\ndocker run node:18-alpine node --version\n"})}),"\n",(0,s.jsx)(n.h3,{id:"port-already-in-use",children:"Port Already in Use"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Use different port\r\ndocker run -p 3001:3000 mlops-docs:1.0\r\n\r\n# Or stop other container\r\ndocker ps\r\ndocker stop <container-id>\n"})}),"\n",(0,s.jsx)(n.h3,{id:"out-of-memory",children:"Out of Memory"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Run with memory limits\r\ndocker run -m 1g mlops-docs:1.0\r\n\r\n# Or increase Docker memory allocation\r\n# Docker Desktop \u2192 Preferences \u2192 Resources\n"})}),"\n",(0,s.jsx)(n.h3,{id:"health-check-failing",children:"Health Check Failing"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Check container logs\r\ndocker logs mlops-docs\r\n\r\n# Test manually\r\ndocker exec mlops-docs wget --quiet --tries=1 --spider http://localhost:3000/\r\n\r\n# Remove health check for debugging\r\n# Temporarily remove HEALTHCHECK from Dockerfile\n"})}),"\n",(0,s.jsx)(n.h2,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,s.jsx)(n.h3,{id:"image-size",children:"Image Size"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Check image size\r\ndocker image ls | grep mlops-docs\r\n\r\n# Use alpine base images (smaller)\r\n# Use multi-stage builds (removes build dependencies)\r\n# Minimize layers\n"})}),"\n",(0,s.jsx)(n.h3,{id:"build-performance",children:"Build Performance"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Use BuildKit for faster builds\r\nDOCKER_BUILDKIT=1 docker build -t mlops-docs:1.0 .\r\n\r\n# Use .dockerignore to exclude unnecessary files\n"})}),"\n",(0,s.jsx)(n.h2,{id:"security-best-practices",children:"Security Best Practices"}),"\n",(0,s.jsxs)(n.p,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Do:"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Use specific version tags (not latest)"}),"\n",(0,s.jsx)(n.li,{children:"Run as non-root user"}),"\n",(0,s.jsx)(n.li,{children:"Scan images for vulnerabilities"}),"\n",(0,s.jsx)(n.li,{children:"Use secrets for sensitive data"}),"\n",(0,s.jsx)(n.li,{children:"Regular updates"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["\u274c ",(0,s.jsx)(n.strong,{children:"Don't:"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Store credentials in images"}),"\n",(0,s.jsx)(n.li,{children:"Use latest tags in production"}),"\n",(0,s.jsx)(n.li,{children:"Run as root"}),"\n",(0,s.jsx)(n.li,{children:"Ignore security warnings"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"example-run-as-non-root",children:"Example: Run as Non-root"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-dockerfile",children:'FROM node:18-alpine\r\n\r\nWORKDIR /app\r\n\r\n# Create non-root user\r\nRUN addgroup -g 1001 -S nodejs\r\nRUN adduser -S nodejs -u 1001\r\n\r\nCOPY --chown=nodejs:nodejs . .\r\n\r\nUSER nodejs\r\n\r\nEXPOSE 3000\r\n\r\nCMD ["npm", "start"]\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.p,{children:["Next: ",(0,s.jsx)(n.a,{href:"/docs/deployment/kubernetes",children:"Kubernetes Deployment \u2192"})]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}}}]);